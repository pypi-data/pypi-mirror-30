---
- name: "[finding all requirments files]"
  set_fact:
    all_requirements_files: "{{ freckle_vars_raw.files | file_list_filter('.*requirements.*txt$') | relative_path_filter(freckle_path) }}"

- name: "starting python-dev setup for {{ freckle_path }}"
  include_role:
    name: "freckles-io.python-dev"
    tasks_from: python-dev-item.yml
  vars:
    pkg_mgr: "{{ freckle_vars.pkg_mgr | default('auto') }}"
    python_dev_setup: "{{ freckle_vars.get('python_dev_setup', 'pip') }}"
    python_dev_setuptools_command: "{{ freckle_vars.get('python_dev_setuptools_command', 'install') }}"
    python_dev_requirements_files: "{{ freckle_vars.get('python_dev_requirements_files', all_requirements_files) }}"
    python_dev_project_path: "{{ freckle_path }}"
    python_dev_dependency_packages: "{{ freckle_vars_raw.get('vars', []) | create_package_list_from_var_filter('packages') }}"
    python_version: "{{ freckle_vars.get('python_dev_version', '3') }}"
