{% extends "admin/cms/page/plugin/change_form.html" %}

{% block top %}<div id="epiceditor"></div>{% endblock %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}djcms_markdown/css/ghostdown.css" />


<!-- <script src="{{ STATIC_URL }}djcms_markdown/js/jquery.ghostdown.js"></script> -->
{% endblock %}

{% block extrahead %}
{{ block.super }}

<script>
$(document).ready(function () {
    $('#cmsmarkdownplugin_form>div').hide();
    $(`<div class="features">
        <section class="editor">
        <div class="outer">
            <div class="editorwrap">
                <section class="entry-markdown">
                    <header class="floatingheader">
                        &nbsp;&nbsp; Markdown
                    </header>
                    <section class="entry-markdown-content">
                        <textarea id="entry-markdown"></textarea>
                    </section>
                </section>
                <section class="entry-preview active">
                    <header class="floatingheader">
                        &nbsp;&nbsp; Preview
                        <span class="entry-word-count">0 words</span>
                    </header>
                    <section class="entry-preview-content">
                        <div class="rendered-markdown"></div>
                    </section>
                </section>
            </div>
        </div>
    </section>
    </div>`).appendTo('#cmsmarkdownplugin_form');
    var text = $('#entry-markdown');
    text.val($('#id_markdown_text').val());
    text.keyup(function () {
        $('#id_markdown_text').val($('#entry-markdown').val());
        console.log("Saved!");
    });
});
</script>
<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
<script src="{{ STATIC_URL }}djcms_markdown/js/ghostdown.js"></script>
<!-- <script src="{{ STATIC_URL }}djcms_markdown/js/jquery.ghostdown.js"></script>
<script>
    $(document).ready(function () {
        $(".editor").ghostDown();
    });
</script> -->
{% endblock %}
