

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Choose a configuration approach for Aglyph &mdash; Aglyph 3.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Aglyph 3.0.0 documentation" href="index.html"/>
        <link rel="up" title="Aglyph cookbook" href="cookbook.html"/>
        <link rel="next" title="Common usage scenarios" href="cookbook-common.html"/>
        <link rel="prev" title="Understand the general features of Aglyph" href="cookbook-understanding.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Aglyph
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new in release 3.0.0?</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Getting started with Aglyph</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cookbook.html">Aglyph cookbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cookbook-understanding.html">Understand the general features of Aglyph</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Choose a configuration approach for Aglyph</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#declarative-xml-configuration">Declarative XML configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#xmlcontext-configures-mutable-builtin-objects-safely">XMLContext configures mutable builtin objects safely</a></li>
<li class="toctree-l4"><a class="reference internal" href="#xmlcontext-is-unicode-aware-and-supports-automatic-character-set-conversion">XMLContext is Unicode-aware and supports automatic character set conversion</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#programmatic-configuration-using-the-context-fluent-api">Programmatic configuration using the Context fluent API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-configuration-using-context">Custom configuration using Context</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-common.html">Common usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-templating.html">Component inheritance using templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-notable.html">Other notable usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-integration.html">Integrating Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-ref.html">Aglyph API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="context-fluent-api.html">The Aglyph Context fluent API</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Aglyph 3.0.0 testing summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap for future releases</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Aglyph</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="cookbook.html">Aglyph cookbook</a> &raquo;</li>
        
      <li>Choose a configuration approach for Aglyph</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="choose-a-configuration-approach-for-aglyph">
<h1>Choose a configuration approach for Aglyph<a class="headerlink" href="#choose-a-configuration-approach-for-aglyph" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">3.0.0</td>
</tr>
</tbody>
</table>
<p>Aglyph explicitly supports two methods of configuration:</p>
<ol class="arabic simple">
<li>Declarative XML configuration conforming to the
<a class="reference download internal" href="_downloads/aglyph-context.dtd" download=""><code class="xref download docutils literal"><span class="pre">Aglyph</span> <span class="pre">context</span> <span class="pre">DTD</span></code></a></li>
<li>Programmatic configuration via <a class="reference internal" href="context-fluent-api.html"><span class="doc">The Aglyph Context fluent API</span></a></li>
</ol>
<p>Opinions vary widely on the merits of XML (particularly for configuration), but
in fairness there’s also plenty of debate over the merits of “code as
configuration” (or “configuration as code” if you prefer) as well. Aglyph
strives to <strong>not</strong> have an opinion one way or the other by supporting <em>either</em>
approach.</p>
<p>However, both approaches to Aglyph configuration have strengths and weaknesses
that you should understand before choosing one over the other.</p>
<div class="section" id="declarative-xml-configuration">
<span id="xml-config"></span><h2>Declarative XML configuration<a class="headerlink" href="#declarative-xml-configuration" title="Permalink to this headline">¶</a></h2>
<p>An Aglyph context can be defined in an XML document that conforms to the
<a class="reference download internal" href="_downloads/aglyph-context.dtd" download=""><code class="xref download docutils literal"><span class="pre">Aglyph</span> <span class="pre">context</span> <span class="pre">DTD</span></code></a>.</p>
<p>The XML context document is parsed by <a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.XMLContext</span></code></a>, which
is just a subclass of <a class="reference internal" href="aglyph.context.html#aglyph.context.Context" title="aglyph.context.Context"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.Context</span></code></a> that knows how to
populate itself from the parsed XML document. Once populated, this context
can then be used to create an <a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal"><span class="pre">aglyph.assembler.Assembler</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">my_app_context</span> <span class="o">=</span> <span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;my-application-context.xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">my_app_context</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The
<a class="reference download internal" href="_downloads/aglyph-context.dtd" download=""><code class="xref download docutils literal"><span class="pre">Aglyph</span> <span class="pre">context</span> <span class="pre">DTD</span></code></a> is
provided primarily as a reference. The <a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.XMLContext</span></code></a>
class uses a non-validating parser by default.</p>
<p>Developers are encouraged to explicitly validate an application’s context
XML document during testing.</p>
<div class="last admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="cookbook-notable.html#custom-xmlcontext-parser"><span class="std std-ref">Use a custom XML parser for XMLContext</span></a></dt>
<dd>This recipe could also be used to force Aglyph to use a <strong>validating</strong>
XML parser.</dd>
</dl>
</div>
</div>
<div class="section" id="xmlcontext-configures-mutable-builtin-objects-safely">
<span id="xml-safe-builtin-mutables"></span><h3>XMLContext configures mutable builtin objects safely<a class="headerlink" href="#xmlcontext-configures-mutable-builtin-objects-safely" title="Permalink to this headline">¶</a></h3>
<p>Consider the following example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;context id=&quot;cookbook&quot;&gt;
    &lt;component id=&quot;cookbook.Example&quot;&gt;
        &lt;attributes&gt;
            &lt;attribute name=&quot;mutable&quot;&gt;
               &lt;list&gt;
                  &lt;int&gt;1&lt;/int&gt;
                  &lt;int&gt;2&lt;/int&gt;
                  &lt;int&gt;3&lt;/int&gt;
               &lt;/list&gt;
            &lt;/attribute&gt;
        &lt;/attributes&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>Because builtin <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">list</span></code></a> objects are mutable, Aglyph will automatically turn
the <em>“mutable”</em> attribute above into an <a class="reference internal" href="aglyph.component.html#aglyph.component.Evaluator" title="aglyph.component.Evaluator"><code class="xref py py-class docutils literal"><span class="pre">aglyph.component.Evaluator</span></code></a>
(which is very similar to a <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">functools.partial</span></code></a>). Whenever the
<em>“cookbook.Example”</em> component is assembled, the <code class="docutils literal"><span class="pre">Evaluator</span></code> for the
<em>“mutable”</em> attribute is called, which will produce a <em>new</em> <code class="docutils literal"><span class="pre">list</span></code> object.</p>
<p>Why is this important? Consider a corresponding programmatic configuration for
the same component:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">context</span><span class="o">.</span><span class="n">prototype</span><span class="p">(</span><span class="s2">&quot;cookbook.Example&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<p>This configuration leads to a (likely) logic error: <strong>all</strong> objects of the
<em>“cookbook.Example”</em> component will share a reference to a single list object.
An example illustrates the problem:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">example1</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;cookbook.Example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example1</span><span class="o">.</span><span class="n">mutable</span>
<span class="go">[1, 2, 3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example1</span><span class="o">.</span><span class="n">mutable</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example2</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;cookbook.Example&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example2</span><span class="o">.</span><span class="n">mutable</span>
<span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Uh-oh! That’s almost certainly <em>not</em> what we intended. To guard against this
behavior, we would need to modify the binding:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">partial</span>
<span class="n">context</span><span class="o">.</span><span class="n">prototype</span><span class="p">(</span><span class="s2">&quot;cookbook.Example&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<p>Now we will get a “fresh” list every time the component is assembled, so
modifying the list on one instance will not affect the lists of any other
instances.</p>
<p>(And what if we were actually specifying a list-of-list, or a tuple-of-list, or
a list-of-dict? Now we would need to account for mutability of <em>each</em> member!)</p>
<p>This is an easy thing to forget, and can lead to a great deal of (programmatic)
configuration code, which is why
<a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.XMLContext</span></code></a> handles it automatically for any <code class="docutils literal"><span class="pre">&lt;list&gt;</span></code>,
<code class="docutils literal"><span class="pre">&lt;tuple&gt;</span></code>, and <code class="docutils literal"><span class="pre">&lt;dict&gt;</span></code> declared in the XML context document.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="cookbook-common.html#deferred-resolution"><span class="std std-ref">Defer the resolution of injection values until assembly time</span></a></p>
</div>
</div>
<div class="section" id="xmlcontext-is-unicode-aware-and-supports-automatic-character-set-conversion">
<span id="xml-unicode-charset-conv"></span><h3>XMLContext is Unicode-aware and supports automatic character set conversion<a class="headerlink" href="#xmlcontext-is-unicode-aware-and-supports-automatic-character-set-conversion" title="Permalink to this headline">¶</a></h3>
<p>Aglyph properly handles Unicode text and encoded byte data in XML context
documents, regardless of Python version.</p>
<p>Aglyph can also provide your application components with byte data encoded to a
user-specified character set.</p>
<p>Consider the following example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;context id=&quot;cookbook&quot;&gt;
    &lt;component id=&quot;cookbook.TextAndData&quot;&gt;
        &lt;attributes&gt;
            &lt;attribute name=&quot;text&quot;&gt;
                &lt;unicode&gt;ΑΦΔ&lt;/unicode&gt;
            &lt;/attribute&gt;
            &lt;attribute name=&quot;data1&quot;&gt;
                &lt;bytes&gt;ΑΦΔ&lt;/bytes&gt;
            &lt;/attribute&gt;
            &lt;attribute name=&quot;data2&quot;&gt;
                &lt;bytes encoding=&quot;iso-8859-7&quot;&gt;ΑΦΔ&lt;/bytes&gt;
            &lt;/attribute&gt;
        &lt;/attributes&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>The first thing to notice is that <code class="docutils literal"><span class="pre">&lt;bytes&gt;ΑΦΔ&lt;/bytes&gt;</span></code> is missing a character
encoding. This can be problematic on Python 2, because the default string
encoding used by the Unicode implementation is typically ASCII:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python2.7
Python 2.7.9 (default, Dec 13 2014, 15:13:49)
[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.56)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.getdefaultencoding()
&#39;ascii&#39;
&gt;&gt;&gt; from aglyph.context import XMLContext
&gt;&gt;&gt; context = XMLContext(&quot;cookbook-context.xml&quot;)
Traceback (most recent call last):
  ...
UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 0-2: ordinal not in range(128)
</pre></div>
</div>
<p>One solution would be to add the <code class="docutils literal"><span class="pre">encoding=</span></code> attribute. Alternatively, you
can instruct <code class="docutils literal"><span class="pre">XMLContext</span></code> to use a different default encoding (it uses the
value of <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.getdefaultencoding" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">sys.getdefaultencoding()</span></code></a> by default):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python2.7
Python 2.7.9 (default, Dec 13 2014, 15:13:49)
[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.56)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from aglyph.assembler import Assembler
&gt;&gt;&gt; from aglyph.context import XMLContext
&gt;&gt;&gt; context = XMLContext(&quot;cookbook-context.xml&quot;, default_encoding=&quot;UTF-8&quot;)
&gt;&gt;&gt; assembler = Assembler(context)
&gt;&gt;&gt; text_and_data = assembler.assemble(&quot;cookbook.TextAndData&quot;)
&gt;&gt;&gt; text_and_data.text
u&#39;\u0391\u03a6\u0394&#39;
&gt;&gt;&gt; text_and_data.data1
&#39;\xce\x91\xce\xa6\xce\x94&#39;
&gt;&gt;&gt; text_and_data.data2
&#39;\xc1\xd6\xc4&#39;
</pre></div>
</div>
<p>If we run the same example under Python 3 (which uses “UTF-8” as the default
encoding), we still get correct results, but without the need to explicitly set
the default encoding on the <code class="docutils literal"><span class="pre">XMLContext</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python3.4
Python 3.4.2 (default, Nov 12 2014, 18:23:59)
[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.54)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from aglyph.assembler import Assembler
&gt;&gt;&gt; from aglyph.context import XMLContext
&gt;&gt;&gt; context = XMLContext(&quot;cookbook-context.xml&quot;)
&gt;&gt;&gt; assembler = Assembler(context)
&gt;&gt;&gt; text_and_data = assembler.assemble(&quot;cookbook.TextAndData&quot;)
&gt;&gt;&gt; text_and_data.text
&#39;ΑΦΔ&#39;
&gt;&gt;&gt; text_and_data.data1
b&#39;\xce\x91\xce\xa6\xce\x94&#39;
&gt;&gt;&gt; text_and_data.data2
b&#39;\xc1\xd6\xc4&#39;
</pre></div>
</div>
<p>One important thing to notice is the difference in the <em>types</em> of the Unicode
and byte strings, dependent upon which version of Python is used.</p>
<div class="section" id="unicode-and-character-encoding-differences-between-python-2-and-python-3">
<h4>Unicode and character encoding differences between Python 2 and Python 3<a class="headerlink" href="#unicode-and-character-encoding-differences-between-python-2-and-python-3" title="Permalink to this headline">¶</a></h4>
<p>The builtin <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> type has changed significantly between Python 2 and
Python 3 (see <a class="reference external" href="https://docs.python.org/release/3.0/whatsnew/3.0.html#text-vs-data-instead-of-unicode-vs-8-bit">Text Vs. Data Instead Of Unicode Vs. 8-bit</a>).</p>
<p>In short: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">str</span></code></a> represented encoded byte data up to and including
Python 2, but representes <em>Unicode text</em> as of Python 3.0:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Version</th>
<th class="head">Unicode text</th>
<th class="head">Encoded byte data</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Python 2</td>
<td><code class="docutils literal"><span class="pre">unicode</span></code></td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
</tr>
<tr class="row-odd"><td>Python 3</td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
<td><code class="docutils literal"><span class="pre">bytes</span></code></td>
</tr>
</tbody>
</table>
<p>The <a class="reference download internal" href="_downloads/aglyph-context.dtd" download=""><code class="xref download docutils literal"><span class="pre">Aglyph</span> <span class="pre">context</span> <span class="pre">DTD</span></code></a> defines <code class="docutils literal"><span class="pre">&lt;bytes&gt;</span></code>, <code class="docutils literal"><span class="pre">&lt;str&gt;</span></code>,
and <code class="docutils literal"><span class="pre">&lt;unicode&gt;</span></code> elements that correspond to the types in the table above, but
treats the element content differently depending on the version of Python under
which Aglyph is running:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="32%" />
<col width="26%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Version</th>
<th class="head"><code class="docutils literal"><span class="pre">&lt;unicode&gt;</span></code> content</th>
<th class="head"><code class="docutils literal"><span class="pre">&lt;str&gt;</span></code> content</th>
<th class="head"><code class="docutils literal"><span class="pre">&lt;bytes&gt;</span></code> content</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Python 2</td>
<td><code class="docutils literal"><span class="pre">unicode</span></code></td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
</tr>
<tr class="row-odd"><td>Python 3</td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
<td><code class="docutils literal"><span class="pre">str</span></code></td>
<td><code class="docutils literal"><span class="pre">bytes</span></code></td>
</tr>
</tbody>
</table>
<p>To summarize the above:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">&lt;unicode&gt;</span></code> is interpreted as a <code class="docutils literal"><span class="pre">unicode</span></code> type in Python 2 and a <code class="docutils literal"><span class="pre">str</span></code>
type in Python 3</li>
<li><code class="docutils literal"><span class="pre">&lt;str&gt;</span></code> is always interpreted as a <code class="docutils literal"><span class="pre">str</span></code> type</li>
<li><code class="docutils literal"><span class="pre">&lt;bytes&gt;</span></code> is interpreted as a <code class="docutils literal"><span class="pre">str</span></code> type in Python 2 and a <code class="docutils literal"><span class="pre">bytes</span></code> type
in Python 3</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For clarity in XML context documents, it is always safe to use <code class="docutils literal"><span class="pre">&lt;bytes&gt;</span></code>
for encoded byte data and <code class="docutils literal"><span class="pre">&lt;unicode&gt;</span></code> for Unicode text (regardless of
Python version), avoiding entirely the ambiguity of <code class="docutils literal"><span class="pre">&lt;str&gt;</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Althoug the DTD permits an <em>encoding=”…”</em> attribute on <code class="docutils literal"><span class="pre">&lt;str&gt;</span></code> elements,
the attribute is <strong>ignored</strong> in Python 3 (a <em>WARNING</em>-level log message is
emitted to the <em>aglyph.context.XMLContext</em> channel if it is present).</p>
</div>
</div>
</div>
</div>
<div class="section" id="programmatic-configuration-using-the-context-fluent-api">
<span id="fluent-config"></span><h2>Programmatic configuration using the Context fluent API<a class="headerlink" href="#programmatic-configuration-using-the-context-fluent-api" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.0.</span></p>
</div>
<p>Objects of <a class="reference internal" href="aglyph.context.html#aglyph.context.Context" title="aglyph.context.Context"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.Context</span></code></a> now support a chained call “fluent” API.
Please refer to <a class="reference internal" href="context-fluent-api.html"><span class="doc">The Aglyph Context fluent API</span></a> for details.</p>
</div>
<div class="section" id="custom-configuration-using-context">
<span id="custom-config"></span><h2>Custom configuration using Context<a class="headerlink" href="#custom-configuration-using-context" title="Permalink to this headline">¶</a></h2>
<p>Do <strong>neither</strong> declarative XML nor fluent configuration suit your fancy?</p>
<p>An <a class="reference internal" href="aglyph.context.html#aglyph.context.Context" title="aglyph.context.Context"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.Context</span></code></a> is just a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><code class="xref py py-obj docutils literal"><span class="pre">dict</span></code></a> that maps component ID
strings (i.e. <code class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.component_id</span></code>) to
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal"><span class="pre">aglyph.component.Component</span></code></a> instances, so embrace the open source
philosophy and “roll your own” configuration mechanism!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Look at <a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.XMLContext</span></code></a> for a starting point - it’s just a
<a class="reference internal" href="aglyph.context.html#aglyph.context.Context" title="aglyph.context.Context"><code class="xref py py-class docutils literal"><span class="pre">aglyph.context.Context</span></code></a> subclass that populates itself from a parsed
XML document.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cookbook-common.html" class="btn btn-neutral float-right" title="Common usage scenarios" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cookbook-understanding.html" class="btn btn-neutral" title="Understand the general features of Aglyph" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006, 2011, 2013-2018 Matthew Zipay.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>