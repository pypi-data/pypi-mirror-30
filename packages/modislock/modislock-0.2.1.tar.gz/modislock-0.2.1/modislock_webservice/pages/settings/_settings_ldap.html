{% macro render_inline_field(field) %}
    <div class="input-group">
        <span class="input-group-addon bg-muted">{{ field.label.text }}</span>
        {{ field(class_='text-center form-control') }}
    </div>
    <ul>
        {% for error in field.errors %}
            <li class="text-warning">{{ error }}</li>
        {% endfor %}
    </ul>
{% endmacro %}

<div class="ibox">
    <div class="ibox-content" style="padding-bottom: 0px;">
        <form id="ldap_form" method="POST" action="{{ url_for('settings.settings') }}">
            {{ forms['ldap'].csrf_token }}
            <div class="form-row form-group">
                {{ forms['ldap'].ldap_enable(data_on="<i class='fa fa-sign-in'></i> LDAP",
                                  data_off="<i class='fa fa-sign-out'></i> LOCAL",
                                  data_onstyle="success",
                                  data_offstyle="warning",
                                  data_width="105",
                                  data_toggle="toggle") }}
                <input id="ldap_enable_hidden" type="hidden" value="n" name="ldap_enable">
                <p class="h4 text-success pull-right" data-toggle="tooltip" data-placement="top"
                   title="LDAP settings help">
                    <a href="#" data-toggle="modal" data-target="#modal_ldap_help">
                        <i class="fa fa-question-circle"></i>
                    </a>
                </p>
            </div>
            <div class="form-row form-group">
                <div class="input-group">
                    <span class="input-group-addon bg-muted">{{ forms['ldap'].ldap_host.label.text }}</span>
                    {{ forms['ldap'].ldap_host(class_='text-center form-control') }}
                    <span class="input-group-addon bg-muted">{{ forms['ldap'].ldap_port.label.text }}</span>
                    {{ forms['ldap'].ldap_port(class_='text-center form-control') }}
                </div>
                <ul>
                    {% for error in forms['ldap'].ldap_host.errors %}
                        <li class="text-warning">{{ error }}</li>
                    {% endfor %}
                    {% for error in forms['ldap'].ldap_port.errors %}
                        <li class="text-warning">{{ error }}</li>
                    {% endfor %}
                </ul>
                {{ render_inline_field(forms['ldap'].ldap_base_dn) }}
                {{ render_inline_field(forms['ldap'].ldap_group_dn) }}
                {{ render_inline_field(forms['ldap'].ldap_search_filter) }}
                {{ render_inline_field(forms['ldap'].ldap_user_bind) }}
                {{ render_inline_field(forms['ldap'].ldap_password) }}
            </div>
            <div class="form-row form-group">
                <div class="col-md-3 col-sm-3">
                    <p>Mapping fields</p>
                </div>
                <div class="col-md-9 col-sm-9">
                    {{ render_inline_field(forms['ldap'].ldap_mapping_field_username) }}
                    {{ render_inline_field(forms['ldap'].ldap_mapping_field_f_name) }}
                    {{ render_inline_field(forms['ldap'].ldap_mapping_field_l_name) }}
                    {{ render_inline_field(forms['ldap'].ldap_mapping_field_email) }}
                </div>
            </div>
            <div class="row"></div>
            <div class="form-row form-group">
                <ul class="todo-list m-t">
                    <li>
                        {{ forms['ldap'].ldap_use_ssl(class_='i-checks') }}
                        <input id="ldap_use_ssl_hidden" type="hidden" value="n" name="ldap_use_ssl">
                        <span class="m-l-xs">{{ forms['ldap'].ldap_use_ssl.label.text }}</span>
                    </li>
                    <li>
                        {{ forms['ldap'].ldap_is_active_directory(class_='i-checks') }}
                        <input id="ldap_is_active_directory_hidden" type="hidden" value="n" name="ldap_is_active_directory">
                        <span class="m-l-xs">{{ forms['ldap'].ldap_is_active_directory.label.text }}</span>
                    </li>
                </ul>
            </div>
            <div class="form-row form-group text-center">
                {{ forms['ldap'].submit_ldap_btn(class_=('btn btn-outline btn-primary btn-rounded')) }}
            </div>
        </form>
    </div>
</div>