{% extends "_template_page.html" %}
{% set active_page = "settings" %}


{#{% from "network_field/_network_field.html" import render_network_field %}#}
{% from "security_notification/_security_notification.html" import render_security_notification %}
{% from "reader_field/_reader.html" import render_reader %}
{% from "reader_field/_door.html" import render_door %}
{% from "reader_field/_relay.html" import render_relay %}
{% from "rules_field/_rules_field.html" import render_rules_field, render_time_field %}
{% from "security_field/_security_field.html" import render_security_field %}
{% from "_form.html" import render_inline_form_field %}

{% macro error_fields(field) %}
    {% if field.errors %}
        <ul class=error>
            {% for error in field.errors %}
                <li class="text-warning">{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endmacro %}

{% block page_title %}System Settings{% endblock %}

{% block page_heading %}
    <h2><i class="fa fa-fw fa-compass"></i>Settings</h2>
{% endblock %}

{% block page_name %}
    Settings
{% endblock %}

{% block page_css %}
    {% assets 'tables_css' %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
    {% endassets %}
    {% assets 'select_css' %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
    {% endassets %}
    {% assets 'settings_css' %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
    {% endassets %}
    <style>
        .nav-tabs
        {
            border-bottom: 2px solid #DDD;
        }

        .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover
        {
            border-width: 0;
        }

        .nav-tabs > li > a
        {
            border: none;
            color: #ffff !important;
            background: #8600a3;
            font-family: "Open Sans", serif;
            height: 45px;
        }

        .nav-tabs > li.active > a, .nav-tabs > li > a:hover
        {
            border: none;
            color: #8600a3 !important;
            background: #fff;
        }

        .nav-tabs > li > a::after
        {
            content: "";
            background: #8600a3;
            height: 2px;
            position: absolute;
            width: 100%;
            left: 0px;
            bottom: -1px;
            transition: all 250ms ease 0s;
            transform: scale(0);
        }

        .nav-tabs > li.active > a::after, .nav-tabs > li:hover > a::after
        {
            transform: scale(1);
        }

        {#.tab-nav > li > a::after#}
        {#{#}
        {#    background: #8600a3 none repeat scroll 0% 0%;#}
        {#    color: #ffff;#}
        {#}#}

        .tab-pane
        {
            padding: 0px !important;
            margin: 0px;
        }

        .tab-content
        {
            padding:10px;
        }

        .nav-tabs > li
        {
            width: 11%;
            text-align:center;
        }

        .card
        {
            background: #FFF none repeat scroll 0% 0%;
            box-shadow: 0px 1px 3px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        {#body#}
        {#{#}
        {#    background: #EDECEC; padding:50px#}
        {#}#}

        {#@media all and (max-width:724px)#}
        {#{#}
        {#    .nav-tabs > li > a > span {display:none;}#}
        {#    .nav-tabs > li > a {padding: 5px 5px;}#}
        {#}#}

        .modis-tab {
            font-family: "open sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 12px;
        }

    </style>
{% endblock page_css %}

{% block page_content %}
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a data-toggle="tab" href="#tab-network"><i class="fa fa-exchange"><span class="modis-tab">&nbsp;Network</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-ldap"><i class="fa fa-group"><span class="modis-tab">&nbsp;LDAP</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-readers"><i class="fa fa-keyboard-o"><span class="modis-tab">&nbsp;Readers</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-security"><i class="fa fa-lock"><span class="modis-tab">&nbsp;Security</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-notification"><i class="fa fa-inbox"><span class="modis-tab">&nbsp;Alerts</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-rules"><i class="fa fa-calendar"><span class="modis-tab">&nbsp;Rules</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-backup"><i class="fa fa-database"><span class="modis-tab">&nbsp;Backup</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-api"><i class="fa fa-cloud"><span class="modis-tab">&nbsp;API</span></i></a></li>
                    <li role="presentation" class=""><a data-toggle="tab" href="#tab-system"><i class="fa fa-sliders"><span class="modis-tab">&nbsp;System</span></i></a><li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" id="tab-network" class="tab-pane active">{% include 'settings/_settings_network.html' %}</div>
                    <div role="tabpanel" id="tab-ldap" class="tab-pane">{% include 'settings/_settings_ldap.html' %}</div>
                    <div role="tabpanel" id="tab-readers" class="tab-pane">{% include 'settings/_settings_readers.html' %}</div>
                    <div role="tabpanel" id="tab-security" class="tab-pane">{% include 'settings/_settings_security.html' %}</div>
                    <div role="tabpanel" id="tab-notification" class="tab-pane">{% include 'settings/_settings_alerts.html' %}</div>
                    <div role="tabpanel" id="tab-rules" class="tab-pane">{% include 'settings/_settings_rules.html' %}</div>
                    <div role="tabpanel" id="tab-backup" class="tab-pane">{% include 'settings/_settings_backup.html' %}</div>
                    <div role="tabpanel" id="tab-api" class="tab-pane">{% include 'settings/_settings_api.html' %}</div>
                    <div role="tabpanel" id="tab-system" class="tab-pane">{% include 'settings/_settings_system.html' %}</div>
                </div>
            </div>
        </div>
    </div>
    {% include 'settings/_settings_reader_info.html' %}
    {% include 'settings/_settings_network_help.html' %}
    {% include 'settings/_settings_ldap_help.html' %}
    {% include 'settings/_settings_readers_help.html' %}
    {% include 'settings/_settings_security_help.html' %}
    {% include 'settings/_settings_alerts_help.html' %}
    {% include 'settings/_settings_rules_help.html' %}
    {% include 'settings/_settings_backup_help.html' %}
    {% include 'settings/_settings_api_help.html' %}
    {% include 'settings/_settings_system_help.html' %}
{% endblock %}

{% block page_js %}
    {{ super() }}
    {% assets 'tables_js' %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
        {% assets 'select_js' %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% assets 'settings_js' %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock page_js %}