{% extends "_template_page.html" %}

{% set active_page = "logs" %}

{% block page_title %}
    Logging and Reporting
{% endblock %}

{% block page_css %}
    {% assets 'logs_css' %}
        <link href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}
    {% assets 'select_css' %}
        <link href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}
{% endblock %}

{% block page_name %}
    Reports
{% endblock %}

{% block page_content %}
<div class="row">
    <div class="ibox float-e-margins">
        <div class="ibox-title">
            {# User and Date Range Selection #}
            <form class="form-inline">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="report_range">Date/Time:</label>
                            <div id="report_range" class="form-control">
                                <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
                                <span></span>
                                <b class="caret"></b>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group pull-right">
                            <label for="user_select"> User:</label>
                            <select id="user_select" class="select2-selection--single" style="width: 250px;">
                                <option value="0">&nbsp;All Users&nbsp;</option>
                                {% for key, user in users.items() %}
                                <option value="{{ user[0] }}">{{ user[1] }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="ibox-context">
            <div class="row">
                <div class="col-md-12">
                    {# Timeline #}
                    <div id="timeline_visualization"></div>
                </div>
            </div>
        </div>
        <div class="ibox-footer">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="input-group" style="margin: 0 auto;">
                            <div id="radioBtn" class="btn-group"  >
                                <a class="btn btn-primary btn-sm active" data-toggle="event" data-title="A">Approved</a>
                                <a class="btn btn-primary btn-sm notActive" data-toggle="event" data-title="D">Denied</a>
                                <a class="btn btn-primary btn-sm notActive" data-toggle="event" data-title="B">All Events</a>
                            </div>
                            <input type="hidden" name="event" id="event" value="A">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock page_content %}

{% block page_js %}
    {{ super() }}
    {% assets 'select_js' %}
        <script src="{{ ASSET_URL }}" type="text/javascript"></script>
    {% endassets %}
    {% assets 'logs_js' %}
        <script src="{{ ASSET_URL }}" type="text/javascript"></script>
    {% endassets %}
    <script>
        $(document).ready(function () {
            init_timeline_data( {{ preserved }} );
        });
    </script>
{%- endblock page_js %}