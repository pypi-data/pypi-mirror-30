{% extends '_base.html' %}

{% block page_title %}
    Modis Lock Registration
{% endblock %}

{% block page_css %}
    {% assets 'select_css' %}
        <link href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}
    {% assets 'welcome_css' %}
        <link href="{{ ASSET_URL }}" rel="stylesheet">
    {% endassets %}
{% endblock %}

{% block body %}
    <div class="overlay gray-bg">
        <div class="registration-box">
            <div>
                <p class="text-center p-lg">
                    <img src={{ url_for('static', filename='img/logo_200.png') }}>
                </p>
            </div>
            <div class="row">
                <div class="col">
                    <form id="welcomeForm" method="POST">
                        {{ form.csrf_token }}
                        <div>
                            <h3>System</h3>
                            <section>
                                <div class="form-group-lg row" style="padding-top: 25px; padding-left: 25px;">
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.serial_number.label }}</span>
                                        {{ form.serial_number(class_='serial-input form-control', maxlength=9) }}
                                    </div>
                                    <p class="text-danger text-center warning-messages" id="serial_message">Please enter a valid serial number 0..9A..Z</p>
                                </div>
                                <div class="form-group row" style="padding-top: 50px; padding-left: 25px;">
                                    <div class="ibox">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <a href="#" data-toggle="modal" data-target="#modal_modules_help">
                                                    <i class="fa fa-info-circle"></i>&nbsp;
                                                </a>
                                                Enable Modules <small class="pull-right">future upgrades</small>
                                            </div>
                                            <div class="panel-body">
                                                <fieldset>
{#                                                    <div class="checkbox checkbox-success">#}
{#                                                        {{ form.ldap_enable(disabled=True) }}#}
{#                                                        {{ form.ldap_enable.label(data_toggle='tooltip', data_placement='top', title='Enables LDAP User Lookups') }}#}
{#                                                    </div>#}
                                                    <div class="checkbox checkbox-success">
                                                        {{ form.battery_enable(disabled=True) }}
                                                        {{ form.battery_enable.label(data_toggle='tooltip', data_placement='top', title='Enables Battery Management if USB is used') }}
                                                    </div>
                                                    <div class="checkbox checkbox-success">
                                                        {{ form.database_bu_enable(disabled=True) }}
                                                        {{ form.database_bu_enable.label(data_toggle='tooltip', data_placement='top', title='Enables Automatic Periodic Database Backups') }}
                                                    </div>
                                                </fieldset>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <h3>Administration</h3>
                            <section>
                                <div style="padding-left: 25px;">
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.first_name.label }}</span>
                                        {{ form.first_name(class_='form-control') }}
                                        <p class="text-danger text-center warning-messages" id="first_name_message">Please enter a admin first name</p>
                                    </div>
                                    <br>
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.last_name.label }}</span>
                                        {{ form.last_name(class_='form-control') }}
                                        <p class="text-danger text-center warning-messages" id="last_name_message">Please enter a admin last name</p>
                                    </div>
                                    <br>
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.email.label }}</span>
                                        {{ form.email(class_='form-control') }}
                                        <p class="text-danger text-center warning-messages" id="email_message">Please enter a valid email address</p>
                                    </div>
                                    <br>
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.password.label }}</span>
                                        {{ form.password(class_='form-control') }}
                                    </div>
                                    <div class="form-group row" id="pwd-container" style="padding-top: 2px;">
                                        <div class="col-sm-10 col-sm-offset-1">
                                            <div class="pwstrength_viewport_progress"></div>
                                            <p class="text-danger text-center warning-messages" id="password_message">Password strength is not enough</p>
                                        </div>
                                    </div>
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.pwd_confirm.label }}</span>
                                        {{ form.pwd_confirm(class_='form-control') }}
                                        <p class="text-danger text-center warning-messages" id="pwd_confirm_message">Passwords do not match</p>
                                    </div>
{#                                    <div class="form-group row" style="padding-top: 15px;">#}
{#                                        <div class="col-sm-12">#}
{#                                            <div class="ibox">#}
{#                                                <div class="panel panel-warning">#}
{#                                                    <div class="panel-heading">#}
{#                                                        <a href="#" data-toggle="modal" data-target="#modal_features_help">#}
{#                                                            <i class="fa fa-info-circle"></i>&nbsp;#}
{#                                                        </a>#}
{#                                                        Available Features#}
{#                                                    </div>#}
{#                                                    <div class="panel-body">#}
{#                                                        <fieldset>#}
{#                                                            <div class="checkbox checkbox-danger">#}
{#                                                                {{ form.ssh_enable }}#}
{#                                                                {{ form.ssh_enable.label(data_toggle='tooltip', data_placement='top', title='Enables SSH Access') }}#}
{#                                                            </div>#}
{#                                                        </fieldset>#}
{#                                                    </div>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
                                </div>
                            </section>

                            <h3>Time / Zone</h3>
                            <section>
                                <div style="padding-left: 25px;">
                                    <div class="input-group date" id="datetimepicker1">
                                        <span class="input-group-addon bg-muted">{{ form.sys_time.label }}</span>
                                        {{ form.sys_time(class_="form-control text-center") }}
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                                    </div>
                                    <br>
                                    <div class="input-group">
                                        <span class="input-group-addon bg-muted">{{ form.tz_zone.label }}</span>
                                        {{ form.tz_zone(class_='select2-single form-control') }}
                                    </div>
                                    <div class="form-group row" style="padding-top: 25px;">
                                        <div class="col-sm-12">
                                            <div class="ibox">
                                                <div class="panel panel-primary">
                                                    <div class="panel-heading">
                                                        <a href="#" data-toggle="modal" data-target="#modal_time_help">
                                                            <i class="fa fa-info-circle"></i>&nbsp;
                                                        </a>
                                                        Enabled Features
                                                    </div>
                                                    <div class="panel-body">
                                                        <fieldset>
                                                            <div class="checkbox checkbox-warning">
                                                                {{ form.auto_time }}
                                                                {{ form.auto_time.label(data_toggle='tooltip', data_placement='top', title='Enables Auto Time Sync') }}
                                                            </div>
                                                        </fieldset>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <h3>Terms</h3>
                            <section>
                                <div style="padding-left: 15px;">
                                    <div class="form-group row">
                                        <div class="col-sm-10">
                                            {{ form.terms(class_='terms-box', readonly=true) }}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="col-sm-4">
                                            <div class="checkbox checkbox-primary">
                                                {{ form.terms_agree }}
                                                {{ form.terms_agree.label(class_='col-form-label') }}
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% include 'welcome/_module_help.html' %}
    {% include 'welcome/_feature_help.html' %}
    {% include 'welcome/_time_help.html' %}
{% endblock %}

{% block page_js %}
    {{ super() }}
    {% assets 'select_js' %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    {% assets 'welcome_js' %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
{% endblock %}
