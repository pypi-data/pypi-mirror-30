

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.15. sfile_util &mdash; EQcorrscan 0.2.7 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/EQcorrscan_logo.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="EQcorrscan 0.2.7 documentation" href="../index.html"/>
        <link rel="up" title="5. Utils" href="../utils.html"/>
        <link rel="next" title="5.15.1.1. eqcorrscan.utils.sfile_util.blanksfile" href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html"/>
        <link rel="prev" title="5.14.1.4. eqcorrscan.utils.seismo_logs.rt_time_log" href="autogen/eqcorrscan.utils.seismo_logs.rt_time_log.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> EQcorrscan
          

          
            
            <img src="../_static/EQcorrscan_logo.jpg" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. EQcorrscan installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updates.html">3. What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">4. EQcorrscan tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">4. Core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../utils.html">5. Utils</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="utils.archive_read.html">5.1. archive_read</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.catalog_to_dd.html">5.2. catalog_to_dd</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.catalog_utils.html">5.3. catalog_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.clustering.html">5.4. clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.correlate.html">5.5. correlate</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.despike.html">5.6. despike</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.findpeaks.html">5.7. findpeaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.mag_calc.html">5.8. mag_calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.parameters.html">5.9. parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.picker.html">5.10. picker</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.plotting.html">5.11. plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.pre_processing.html">5.12. pre_processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.sac_util.html">5.13. sac_util</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.seismo_logs.html">5.14. seismo_logs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.15. sfile_util</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#functions">5.15.1. Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html">5.15.1.1. eqcorrscan.utils.sfile_util.blanksfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtosfile.html">5.15.1.2. eqcorrscan.utils.sfile_util.eventtosfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.nordpick.html">5.15.1.3. eqcorrscan.utils.sfile_util.nordpick</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.populatesfile.html">5.15.1.4. eqcorrscan.utils.sfile_util.populatesfile</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readheader.html">5.15.1.5. eqcorrscan.utils.sfile_util.readheader</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readpicks.html">5.15.1.6. eqcorrscan.utils.sfile_util.readpicks</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readwavename.html">5.15.1.7. eqcorrscan.utils.sfile_util.readwavename</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.stationtoseisan.html">5.15.1.8. eqcorrscan.utils.sfile_util.stationtoseisan</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#private-functions">5.15.2. Private Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._evmagtonor.html">5.15.2.1. eqcorrscan.utils.sfile_util._evmagtonor</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._float_conv.html">5.15.2.2. eqcorrscan.utils.sfile_util._float_conv</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._int_conv.html">5.15.2.3. eqcorrscan.utils.sfile_util._int_conv</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._nortoevmag.html">5.15.2.4. eqcorrscan.utils.sfile_util._nortoevmag</a></li>
<li class="toctree-l4"><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._str_conv.html">5.15.2.5. eqcorrscan.utils.sfile_util._str_conv</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utils.stacking.html">5.16. stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.synth_seis.html">5.17. synth_seis</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.trigger.html">5.18. trigger</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EQcorrscan</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../utils.html">5. Utils</a> &raquo;</li>
        
      <li>5.15. sfile_util</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/submodules/utils.sfile_util.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-eqcorrscan.utils.sfile_util">
<span id="sfile-util"></span><h1>5.15. sfile_util<a class="headerlink" href="#module-eqcorrscan.utils.sfile_util" title="Permalink to this headline">¶</a></h1>
<p>Part of the EQcorrscan module to read nordic format s-files and write them.
Maps between Nordic format and obspy Event objects.</p>
<p>Note that these functions do not provide full functionality between quakeML
and seisan s-files.  Currently (as of version 0.1.1) these only convert pick
times and phase information, along with amplitude information for local
magnitudes between seisan and quakeML.  Location information including
hypocentre, origin time and magnitudes are also handled.</p>
<p>A series of wrappers and conversions is included between the legacy PICK
and EVENTINFO classes, however these will be depreciated along with these
classes for version 0.1.0.  Users should transition to using obspy.core.event
classes as these have more support and functionality.</p>
<p>We have not implemented any handling of focal mechanism solutions between
the two formats.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pick time-residuals are handled in event.origins[0].arrivals, with     the arrival.pick_id linking the arrival (which contain calculated     information) with the pick.resource_id (where the pick contains only     physical measured information).</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Example:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eqcorrscan.utils</span> <span class="k">import</span> <span class="n">sfile_util</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">event</span> <span class="o">=</span> <span class="n">sfile_util</span><span class="o">.</span><span class="n">readpicks</span><span class="p">(</span><span class="s1">&#39;eqcorrscan/tests/test_data/REA/TEST_/&#39;</span> <span class="o">+</span>
<span class="gp">... </span>                             <span class="s1">&#39;01-0411-15L.S201309&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pick</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">picks</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_rms</span> <span class="o">=</span> <span class="p">[</span><span class="n">arrival</span><span class="o">.</span><span class="n">time_residual</span> <span class="k">for</span> <span class="n">arrival</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">arrivals</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">arrival</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">==</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">EQcorrscan developers.</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</td>
</tr>
</tbody>
</table>
<div class="section" id="functions">
<h2>5.15.1. Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html#eqcorrscan.utils.sfile_util.blanksfile" title="eqcorrscan.utils.sfile_util.blanksfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">blanksfile</span></code></a></td>
<td>Generate an empty s-file with a populated header for a given waveform.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.eventtosfile.html#eqcorrscan.utils.sfile_util.eventtosfile" title="eqcorrscan.utils.sfile_util.eventtosfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">eventtosfile</span></code></a></td>
<td>Write an obspy.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.nordpick.html#eqcorrscan.utils.sfile_util.nordpick" title="eqcorrscan.utils.sfile_util.nordpick"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nordpick</span></code></a></td>
<td>Format information from an obspy.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.populatesfile.html#eqcorrscan.utils.sfile_util.populatesfile" title="eqcorrscan.utils.sfile_util.populatesfile"><code class="xref py py-obj docutils literal notranslate"><span class="pre">populatesfile</span></code></a></td>
<td>Populate a blank nordic format S-file with pick information.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readheader.html#eqcorrscan.utils.sfile_util.readheader" title="eqcorrscan.utils.sfile_util.readheader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readheader</span></code></a></td>
<td>Read header information from a seisan nordic format S-file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readpicks.html#eqcorrscan.utils.sfile_util.readpicks" title="eqcorrscan.utils.sfile_util.readpicks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readpicks</span></code></a></td>
<td>Read all pick information from the s-file to an obspy.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.readwavename.html#eqcorrscan.utils.sfile_util.readwavename" title="eqcorrscan.utils.sfile_util.readwavename"><code class="xref py py-obj docutils literal notranslate"><span class="pre">readwavename</span></code></a></td>
<td>Extract the waveform filename from the s-file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util.stationtoseisan.html#eqcorrscan.utils.sfile_util.stationtoseisan" title="eqcorrscan.utils.sfile_util.stationtoseisan"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stationtoseisan</span></code></a></td>
<td>Convert obspy inventory to string formatted for Seisan STATION0.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="private-functions">
<h2>5.15.2. Private Functions<a class="headerlink" href="#private-functions" title="Permalink to this headline">¶</a></h2>
<p>Note that these functions are not designed for public use and may change
at any point.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._evmagtonor.html#eqcorrscan.utils.sfile_util._evmagtonor" title="eqcorrscan.utils.sfile_util._evmagtonor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_evmagtonor</span></code></a></td>
<td>Switch from obspy event magnitude types to seisan syntax.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._float_conv.html#eqcorrscan.utils.sfile_util._float_conv" title="eqcorrscan.utils.sfile_util._float_conv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_float_conv</span></code></a></td>
<td>Convenience tool to convert from string to float.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._int_conv.html#eqcorrscan.utils.sfile_util._int_conv" title="eqcorrscan.utils.sfile_util._int_conv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_int_conv</span></code></a></td>
<td>Convenience tool to convert from string to integer.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._nortoevmag.html#eqcorrscan.utils.sfile_util._nortoevmag" title="eqcorrscan.utils.sfile_util._nortoevmag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_nortoevmag</span></code></a></td>
<td>Switch from nordic type magnitude notation to obspy event magnitudes.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/eqcorrscan.utils.sfile_util._str_conv.html#eqcorrscan.utils.sfile_util._str_conv" title="eqcorrscan.utils.sfile_util._str_conv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_str_conv</span></code></a></td>
<td>Convenience tool to convert a number, either float or int into a string.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autogen/eqcorrscan.utils.sfile_util.blanksfile.html" class="btn btn-neutral float-right" title="5.15.1.1. eqcorrscan.utils.sfile_util.blanksfile" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="autogen/eqcorrscan.utils.seismo_logs.rt_time_log.html" class="btn btn-neutral" title="5.14.1.4. eqcorrscan.utils.seismo_logs.rt_time_log" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, 2016: EQcorrscan developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>