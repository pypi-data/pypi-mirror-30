
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Change history for Celery 2.4 &#8212; Celery 4.2.0 documentation</title>
    <link rel="stylesheet" href="../_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Change history for Celery 2.3" href="changelog-2.3.html" />
    <link rel="prev" title="Change history for Celery 2.5" href="changelog-2.5.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog-2.3.html" title="Change history for Celery 2.3"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog-2.5.html" title="Change history for Celery 2.5"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Celery 4.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">History</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="deck">

    
        <p>
        This document describes the current stable version of Celery (4.2).
        For development docs,
        <a href="http://docs.celeryproject.org/en/master/history/changelog-2.4.html">go here</a>.
        </p>
    

</div>
    <div class="section" id="change-history-for-celery-2-4">
<span id="changelog-2-4"></span><h1>Change history for Celery 2.4<a class="headerlink" href="#change-history-for-celery-2-4" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#version-2-4-5" id="id7">2.4.5</a></li>
<li><a class="reference internal" href="#version-2-4-4" id="id8">2.4.4</a><ul>
<li><a class="reference internal" href="#security-fixes" id="id9">Security Fixes</a></li>
<li><a class="reference internal" href="#fixes" id="id10">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-4-3" id="id11">2.4.3</a></li>
<li><a class="reference internal" href="#version-2-4-2" id="id12">2.4.2</a></li>
<li><a class="reference internal" href="#version-2-4-1" id="id13">2.4.1</a></li>
<li><a class="reference internal" href="#version-2-4-0" id="id14">2.4.0</a><ul>
<li><a class="reference internal" href="#important-notes" id="id15">Important Notes</a></li>
<li><a class="reference internal" href="#news" id="id16">News</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-2-4-5">
<span id="id1"></span><h2><a class="toc-backref" href="#id7">2.4.5</a><a class="headerlink" href="#version-2-4-5" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-12-02 05:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Periodic task interval schedules were accidentally rounded down,
resulting in some periodic tasks being executed early.</p>
</li>
<li><p class="first">Logging of humanized times in the beat log is now more detailed.</p>
</li>
<li><p class="first">New <a class="reference internal" href="../getting-started/brokers/index.html#brokers"><span class="std std-ref">Brokers</span></a> section in the Getting Started part of the Documentation</p>
<blockquote>
<div><p>This replaces the old “Other queues” tutorial, and adds
documentation for MongoDB, Beanstalk and CouchDB.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-2-4-4">
<span id="id2"></span><h2><a class="toc-backref" href="#id8">2.4.4</a><a class="headerlink" href="#version-2-4-4" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-25 04:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="security-fixes">
<span id="v244-security-fixes"></span><h3><a class="toc-backref" href="#id9">Security Fixes</a><a class="headerlink" href="#security-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">[Security: <a class="reference external" href="https://github.com/celery/celery/tree/master/docs/sec/CELERYSA-0001.txt">CELERYSA-0001</a>] Daemons would set effective id’s rather than
real id’s when the <a class="reference internal" href="../reference/celery.bin.celery.html#cmdoption-celery-uid"><code class="xref std std-option docutils literal notranslate"><span class="pre">--uid</span></code></a>/
<a class="reference internal" href="../reference/celery.bin.celery.html#cmdoption-celery-gid"><code class="xref std std-option docutils literal notranslate"><span class="pre">--gid</span></code></a> arguments to
<strong class="program">celery multi</strong>, <strong class="program">celeryd_detach</strong>,
<strong class="program">celery beat</strong> and <strong class="program">celery events</strong> were used.</p>
<p>This means privileges weren’t properly dropped, and that it would
be possible to regain supervisor privileges later.</p>
</li>
</ul>
</div>
<div class="section" id="fixes">
<span id="v244-fixes"></span><h3><a class="toc-backref" href="#id10">Fixes</a><a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Processes pool: Fixed rare deadlock at shutdown (<span class="xref issue">Issue #523</span>).</p>
<blockquote>
<div><p>Fix contributed by Ionel Maries Christian.</p>
</div></blockquote>
</li>
<li><p class="first">Webhook tasks issued the wrong HTTP POST headers (<span class="xref issue">Issue #515</span>).</p>
<blockquote>
<div><p>The <em>Content-Type</em> header has been changed from
<code class="docutils literal notranslate"><span class="pre">application/json</span></code> ⇒  <code class="docutils literal notranslate"><span class="pre">application/x-www-form-urlencoded</span></code>,
and adds a proper <em>Content-Length</em> header.</p>
<p>Fix contributed by Mitar.</p>
</div></blockquote>
</li>
<li><p class="first">Daemonization tutorial: Adds a configuration example using Django and
virtualenv together (<span class="xref issue">Issue #505</span>).</p>
<blockquote>
<div><p>Contributed by Juan Ignacio Catalano.</p>
</div></blockquote>
</li>
<li><p class="first">generic init-scripts now automatically creates log and pid file
directories (<span class="xref issue">Issue #545</span>).</p>
<blockquote>
<div><p>Contributed by Chris Streeter.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-4-3">
<span id="id3"></span><h2><a class="toc-backref" href="#id11">2.4.3</a><a class="headerlink" href="#version-2-4-3" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-22 06:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Fixes module import typo in <cite>celeryctl</cite> (<span class="xref issue">Issue #538</span>).</p>
<blockquote>
<div><p>Fix contributed by Chris Streeter.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-2-4-2">
<span id="id4"></span><h2><a class="toc-backref" href="#id12">2.4.2</a><a class="headerlink" href="#version-2-4-2" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-14 12:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>Program module no longer uses relative imports so that it’s
possible to do <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">celery.bin.name</span></code>.</li>
</ul>
</div>
<div class="section" id="version-2-4-1">
<span id="id5"></span><h2><a class="toc-backref" href="#id13">2.4.1</a><a class="headerlink" href="#version-2-4-1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-07 06:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">celeryctl</span> <span class="pre">inspect</span></code> commands was missing output.</li>
<li>processes pool: Decrease polling interval for less idle CPU usage.</li>
<li>processes pool: MaybeEncodingError wasn’t wrapped in ExceptionInfo
(<span class="xref issue">Issue #524</span>).</li>
<li>worker: would silence errors occurring after task consumer started.</li>
<li>logging: Fixed a bug where unicode in stdout redirected log messages
couldn’t be written (<span class="xref issue">Issue #522</span>).</li>
</ul>
</div>
<div class="section" id="version-2-4-0">
<span id="id6"></span><h2><a class="toc-backref" href="#id14">2.4.0</a><a class="headerlink" href="#version-2-4-0" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-04 04:00 p.m. GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="important-notes">
<span id="v240-important"></span><h3><a class="toc-backref" href="#id15">Important Notes</a><a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Now supports Python 3.</p>
</li>
<li><p class="first">Fixed deadlock in worker process handling (<span class="xref issue">Issue #496</span>).</p>
<blockquote>
<div><p>A deadlock could occur after spawning new child processes because
the logging library’s mutex wasn’t properly reset after fork.</p>
<p>The symptoms of this bug affecting would be that the worker simply
stops processing tasks, as none of the workers child processes
are functioning. There was a greater chance of this bug occurring
with <code class="docutils literal notranslate"><span class="pre">maxtasksperchild</span></code> or a time-limit enabled.</p>
<p>This is a workaround for <a class="reference external" href="http://bugs.python.org/issue6721#msg140215">http://bugs.python.org/issue6721#msg140215</a>.</p>
<p>Be aware that while this fixes the logging library lock,
there could still be other locks initialized in the parent
process, introduced by custom code.</p>
<p>Fix contributed by Harm Verhagen.</p>
</div></blockquote>
</li>
<li><p class="first">AMQP Result backend: Now expires results by default.</p>
<blockquote>
<div><p>The default expiration value is now taken from the
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code> setting.</p>
<p>The old <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_AMQP_TASK_RESULT_EXPIRES</span></code> setting has been
deprecated and will be removed in version 4.0.</p>
<p>Note that this means that the result backend requires RabbitMQ 2.1.0 or
higher, and that you have to disable expiration if you’re running
with an older version. You can do so by disabling the
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code> setting:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_TASK_RESULT_EXPIRES</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Eventlet: Fixed problem with shutdown (<span class="xref issue">Issue #457</span>).</p>
</li>
<li><p class="first">Broker transports can be now be specified using URLs</p>
<blockquote>
<div><p>The broker can now be specified as a URL instead.
This URL must have the format:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>transport://user:password@hostname:port/virtual_host
</pre></div>
</div>
<p>for example the default broker is written as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>amqp://guest:guest@localhost:5672//
</pre></div>
</div>
<p>The scheme is required, so that the host is identified
as a URL and not just a host name.
User, password, port and virtual_host are optional and
defaults to the particular transports default value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Note that the path component (virtual_host) always starts with a
forward-slash. This is necessary to distinguish between the virtual
host <code class="docutils literal notranslate"><span class="pre">''</span></code> (empty) and <code class="docutils literal notranslate"><span class="pre">'/'</span></code>, which are both acceptable virtual
host names.</p>
<p>A virtual host of <code class="docutils literal notranslate"><span class="pre">'/'</span></code> becomes:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>amqp://guest:guest@localhost:5672//
</pre></div>
</div>
<p>and a virtual host of <code class="docutils literal notranslate"><span class="pre">''</span></code> (empty) becomes:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>amqp://guest:guest@localhost:5672/
</pre></div>
</div>
<p class="last">So the leading slash in the path component is <strong>always required</strong>.</p>
</div>
<p>In addition the <code class="xref std std-setting docutils literal notranslate"><span class="pre">BROKER_URL</span></code> setting has been added as an alias
to <code class="docutils literal notranslate"><span class="pre">BROKER_HOST</span></code>. Any broker setting specified in both the URL and in
the configuration will be ignored, if a setting isn’t provided in the URL
then the value from the configuration will be used as default.</p>
<p>Also, programs now support the <a class="reference internal" href="../reference/celery.bin.celery.html#cmdoption-celery-b"><code class="xref std std-option docutils literal notranslate"><span class="pre">--broker</span></code></a>
option to specify a broker URL on the command-line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> celery worker -b redis://localhost

<span class="gp">$</span> celery inspect -b amqp://guest:guest@localhost//e
</pre></div>
</div>
<p>The environment variable <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_BROKER_URL</span></code> can also be used to
easily override the default broker used.</p>
</div></blockquote>
</li>
<li><p class="first">The deprecated <code class="xref py py-func docutils literal notranslate"><span class="pre">celery.loaders.setup_loader()</span></code> function has been removed.</p>
</li>
<li><p class="first">The <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_ERROR_WHITELIST</span></code> setting has been replaced
by a more flexible approach (<span class="xref issue">Issue #447</span>).</p>
<blockquote>
<div><p>The error mail sending logic is now available as <code class="docutils literal notranslate"><span class="pre">Task.ErrorMail</span></code>,
with the implementation (for reference) in <code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.utils.mail</span></code>.</p>
<p>The error mail class can be sub-classed to gain complete control
of when error messages are sent, thus removing the need for a separate
white-list setting.</p>
<p>The <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_ERROR_WHITELIST</span></code> setting has been deprecated,
and will be removed completely in version 4.0.</p>
</div></blockquote>
</li>
<li><p class="first">Additional Deprecations</p>
<blockquote>
<div><p>The following functions has been deprecated and is scheduled for removal in
version 4.0:</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Old function</strong></th>
<th class="head"><strong>Alternative</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>celery.loaders.current_loader</cite></td>
<td><cite>celery.current_app.loader</cite></td>
</tr>
<tr class="row-odd"><td><cite>celery.loaders.load_settings</cite></td>
<td><cite>celery.current_app.conf</cite></td>
</tr>
<tr class="row-even"><td><cite>celery.execute.apply</cite></td>
<td><cite>Task.apply</cite></td>
</tr>
<tr class="row-odd"><td><cite>celery.execute.apply_async</cite></td>
<td><cite>Task.apply_async</cite></td>
</tr>
<tr class="row-even"><td><cite>celery.execute.delay_task</cite></td>
<td><cite>celery.execute.send_task</cite></td>
</tr>
</tbody>
</table>
<p>The following settings has been deprecated and is scheduled for removal
in version 4.0:</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Old setting</strong></th>
<th class="head"><strong>Alternative</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>CELERYD_LOG_LEVEL</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">--loglevel=</span></code></td>
</tr>
<tr class="row-odd"><td><cite>CELERYD_LOG_FILE</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">--logfile=</span></code></td>
</tr>
<tr class="row-even"><td><cite>CELERYBEAT_LOG_LEVEL</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">--loglevel=</span></code></td>
</tr>
<tr class="row-odd"><td><cite>CELERYBEAT_LOG_FILE</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">--logfile=</span></code></td>
</tr>
<tr class="row-even"><td><cite>CELERYMON_LOG_LEVEL</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celerymon</span> <span class="pre">--loglevel=</span></code></td>
</tr>
<tr class="row-odd"><td><cite>CELERYMON_LOG_FILE</cite></td>
<td><code class="docutils literal notranslate"><span class="pre">celerymon</span> <span class="pre">--logfile=</span></code></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="news">
<span id="v240-news"></span><h3><a class="toc-backref" href="#id16">News</a><a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">No longer depends on <a class="reference external" href="https://pypi.python.org/pypi/pyparsing/">pyparsing</a>.</p>
</li>
<li><p class="first">Now depends on Kombu 1.4.3.</p>
</li>
<li><p class="first">CELERY_IMPORTS can now be a scalar value (<span class="xref issue">Issue #485</span>).</p>
<blockquote>
<div><p>It’s too easy to forget to add the comma after the sole element of a
tuple, and this is something that often affects newcomers.</p>
<p>The docs should probably use a list in examples, as using a tuple
for this doesn’t even make sense. Nonetheless, there are many
tutorials out there using a tuple, and this change should be a help
to new users.</p>
<p>Suggested by <a class="reference external" href="https://github.com/jsaxon-cars/">&#64;jsaxon-cars</a>.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed a memory leak when using the thread pool (<span class="xref issue">Issue #486</span>).</p>
<blockquote>
<div><p>Contributed by Kornelijus Survila.</p>
</div></blockquote>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">statedb</span></code> wasn’t saved at exit.</p>
<blockquote>
<div><p>This has now been fixed and it should again remember previously
revoked tasks when a <code class="docutils literal notranslate"><span class="pre">--statedb</span></code> is enabled.</p>
</div></blockquote>
</li>
<li><p class="first">Adds <a class="reference external" href="http://django.readthedocs.io/en/latest/ref/settings.html#std:setting-EMAIL_USE_TLS" title="(in Django v2.1)"><code class="xref std std-setting docutils literal notranslate"><span class="pre">EMAIL_USE_TLS</span></code></a> to enable secure SMTP connections
(<span class="xref issue">Issue #418</span>).</p>
<blockquote>
<div><p>Contributed by Stefan Kjartansson.</p>
</div></blockquote>
</li>
<li><p class="first">Now handles missing fields in task messages as documented in the message
format documentation.</p>
<blockquote>
<div><ul class="simple">
<li>Missing required field throws <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.InvalidTaskError" title="celery.exceptions.InvalidTaskError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidTaskError</span></code></a></li>
<li>Missing args/kwargs is assumed empty.</li>
</ul>
<p>Contributed by Chris Chamberlin.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed race condition in <a class="reference internal" href="../reference/celery.events.state.html#module-celery.events.state" title="celery.events.state"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.events.state</span></code></a> (<code class="docutils literal notranslate"><span class="pre">celerymon</span></code>/<code class="docutils literal notranslate"><span class="pre">celeryev</span></code>)
where task info would be removed while iterating over it (<span class="xref issue">Issue #501</span>).</p>
</li>
<li><p class="first">The Cache, Cassandra, MongoDB, Redis and Tyrant backends now respects
the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RESULT_SERIALIZER</span></code> setting (<span class="xref issue">Issue #435</span>).</p>
<blockquote>
<div><p>This means that only the database (Django/SQLAlchemy) backends
currently doesn’t support using custom serializers.</p>
<p>Contributed by Steeve Morin</p>
</div></blockquote>
</li>
<li><p class="first">Logging calls no longer manually formats messages, but delegates
that to the logging system, so tools like Sentry can easier
work with the messages (<span class="xref issue">Issue #445</span>).</p>
<blockquote>
<div><p>Contributed by Chris Adams.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">multi</span></code> now supports a <code class="docutils literal notranslate"><span class="pre">stop_verify</span></code> command to wait for
processes to shutdown.</p>
</li>
<li><p class="first">Cache backend didn’t work if the cache key was unicode (<span class="xref issue">Issue #504</span>).</p>
<blockquote>
<div><p>Fix contributed by Neil Chintomby.</p>
</div></blockquote>
</li>
<li><p class="first">New setting <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RESULT_DB_SHORT_LIVED_SESSIONS</span></code> added,
which if enabled will disable the caching of SQLAlchemy sessions
(<span class="xref issue">Issue #449</span>).</p>
<blockquote>
<div><p>Contributed by Leo Dirac.</p>
</div></blockquote>
</li>
<li><p class="first">All result backends now implements <code class="docutils literal notranslate"><span class="pre">__reduce__</span></code> so that they can
be pickled (<span class="xref issue">Issue #441</span>).</p>
<blockquote>
<div><p>Fix contributed by Remy Noel</p>
</div></blockquote>
</li>
<li><p class="first">multi didn’t work on Windows (<span class="xref issue">Issue #472</span>).</p>
</li>
<li><p class="first">New-style <code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_*</span></code> settings now takes precedence over
the old <code class="docutils literal notranslate"><span class="pre">REDIS_*</span></code> configuration keys (<span class="xref issue">Issue #508</span>).</p>
<blockquote>
<div><p>Fix contributed by Joshua Ginsberg</p>
</div></blockquote>
</li>
<li><p class="first">Generic beat init-script no longer sets <cite>bash -e</cite> (<span class="xref issue">Issue #510</span>).</p>
<blockquote>
<div><p>Fix contributed by Roger Hu.</p>
</div></blockquote>
</li>
<li><p class="first">Documented that Chords don’t work well with <strong class="command">redis-server</strong> versions
before 2.2.</p>
<blockquote>
<div><p>Contributed by Dan McGee.</p>
</div></blockquote>
</li>
<li><p class="first">The <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYBEAT_MAX_LOOP_INTERVAL</span></code> setting wasn’t respected.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">inspect.registered_tasks</span></code> renamed to <code class="docutils literal notranslate"><span class="pre">inspect.registered</span></code> for naming
consistency.</p>
<blockquote>
<div><p>The previous name is still available as an alias.</p>
<p>Contributed by Mher Movsisyan</p>
</div></blockquote>
</li>
<li><p class="first">Worker logged the string representation of args and kwargs
without safe guards (<span class="xref issue">Issue #480</span>).</p>
</li>
<li><p class="first">RHEL init-script: Changed worker start-up priority.</p>
<blockquote>
<div><p>The default start / stop priorities for MySQL on RHEL are:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> chkconfig: - <span class="m">64</span> <span class="m">36</span>
</pre></div>
</div>
<p>Therefore, if Celery is using a database as a broker / message store, it
should be started after the database is up and running, otherwise errors
will ensue. This commit changes the priority in the init-script to:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> chkconfig: - <span class="m">85</span> <span class="m">15</span>
</pre></div>
</div>
<p>which are the default recommended settings for 3-rd party applications
and assure that Celery will be started after the database service &amp; shut
down before it terminates.</p>
<p>Contributed by Yury V. Zaytsev.</p>
</div></blockquote>
</li>
<li><p class="first">KeyValueStoreBackend.get_many didn’t respect the <code class="docutils literal notranslate"><span class="pre">timeout</span></code> argument
(<span class="xref issue">Issue #512</span>).</p>
</li>
<li><p class="first">beat/events’s <code class="docutils literal notranslate"><span class="pre">--workdir</span></code> option didn’t <em class="manpage">chdir(2)</em> before after
configuration was attempted (<span class="xref issue">Issue #506</span>).</p>
</li>
<li><p class="first">After deprecating 2.4 support we can now name modules correctly, since we
can take use of absolute imports.</p>
<blockquote>
<div><p>Therefore the following internal modules have been renamed:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">celery.concurrency.evlet</span></code>    -&gt; <code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code>
<code class="docutils literal notranslate"><span class="pre">celery.concurrency.evg</span></code>      -&gt; <code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><code class="file docutils literal notranslate"><span class="pre">AUTHORS</span></code> file is now sorted alphabetically.</p>
<blockquote>
<div><p>Also, as you may have noticed the contributors of new features/fixes are
now mentioned in the Changelog.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/celery_512.png" alt="Logo"/>
            </a></p><iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>
<div id="donate">
    <b>Please help support this community project with a donation:</b>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
    ">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="changelog-2.5.html"
                        title="previous chapter">Change history for Celery 2.5</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog-2.3.html"
                        title="next chapter">Change history for Celery 2.3</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/history/changelog-2.4.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog-2.3.html" title="Change history for Celery 2.3"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog-2.5.html" title="Change history for Celery 2.5"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Celery 4.2.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >History</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2009-2017, Ask Solem &amp; contributors.
    </div>
  </body>
</html>