
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Frequently Asked Questions &#8212; Celery 4.2.0 documentation</title>
    <link rel="stylesheet" href="_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Change history" href="changelog.html" />
    <link rel="prev" title="Task Cookbook" href="tutorials/task-cookbook.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Change history"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorials/task-cookbook.html" title="Task Cookbook"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Celery 4.2.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="deck">

    
        <p>
        This document describes the current stable version of Celery (4.2).
        For development docs,
        <a href="http://docs.celeryproject.org/en/master/faq.html">go here</a>.
        </p>
    

</div>
    <div class="section" id="frequently-asked-questions">
<span id="faq"></span><h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#general" id="id1">General</a><ul>
<li><a class="reference internal" href="#what-kinds-of-things-should-i-use-celery-for" id="id2">What kinds of things should I use Celery for?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#misconceptions" id="id3">Misconceptions</a><ul>
<li><a class="reference internal" href="#does-celery-really-consist-of-50-000-lines-of-code" id="id4">Does Celery really consist of 50.000 lines of code?</a></li>
<li><a class="reference internal" href="#does-celery-have-many-dependencies" id="id5">Does Celery have many dependencies?</a><ul>
<li><a class="reference internal" href="#celery" id="id6">celery</a></li>
<li><a class="reference internal" href="#kombu" id="id7">kombu</a></li>
</ul>
</li>
<li><a class="reference internal" href="#is-celery-heavy-weight" id="id8">Is Celery heavy-weight?</a></li>
<li><a class="reference internal" href="#is-celery-dependent-on-pickle" id="id9">Is Celery dependent on pickle?</a></li>
<li><a class="reference internal" href="#is-celery-for-django-only" id="id10">Is Celery for Django only?</a></li>
<li><a class="reference internal" href="#do-i-have-to-use-amqp-rabbitmq" id="id11">Do I have to use AMQP/RabbitMQ?</a></li>
<li><a class="reference internal" href="#is-celery-multilingual" id="id12">Is Celery multilingual?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting" id="id13">Troubleshooting</a><ul>
<li><a class="reference internal" href="#mysql-is-throwing-deadlock-errors-what-can-i-do" id="id14">MySQL is throwing deadlock errors, what can I do?</a></li>
<li><a class="reference internal" href="#the-worker-isn-t-doing-anything-just-hanging" id="id15">The worker isn’t doing anything, just hanging</a></li>
<li><a class="reference internal" href="#task-results-aren-t-reliably-returning" id="id16">Task results aren’t reliably returning</a></li>
<li><a class="reference internal" href="#why-is-task-delay-apply-the-worker-just-hanging" id="id17">Why is Task.delay/apply*/the worker just hanging?</a></li>
<li><a class="reference internal" href="#does-it-work-on-freebsd" id="id18">Does it work on FreeBSD?</a></li>
<li><a class="reference internal" href="#i-m-having-integrityerror-duplicate-key-errors-why" id="id19">I’m having <cite>IntegrityError: Duplicate Key</cite> errors. Why?</a></li>
<li><a class="reference internal" href="#why-aren-t-my-tasks-processed" id="id20">Why aren’t my tasks processed?</a></li>
<li><a class="reference internal" href="#why-won-t-my-task-run" id="id21">Why won’t my Task run?</a></li>
<li><a class="reference internal" href="#why-won-t-my-periodic-task-run" id="id22">Why won’t my periodic task run?</a></li>
<li><a class="reference internal" href="#how-do-i-purge-all-waiting-tasks" id="id23">How do I purge all waiting tasks?</a></li>
<li><a class="reference internal" href="#i-ve-purged-messages-but-there-are-still-messages-left-in-the-queue" id="id24">I’ve purged messages, but there are still messages left in the queue?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#results" id="id25">Results</a><ul>
<li><a class="reference internal" href="#how-do-i-get-the-result-of-a-task-if-i-have-the-id-that-points-there" id="id26">How do I get the result of a task if I have the ID that points there?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#security" id="id27">Security</a><ul>
<li><a class="reference internal" href="#isn-t-using-pickle-a-security-concern" id="id28">Isn’t using <cite>pickle</cite> a security concern?</a></li>
<li><a class="reference internal" href="#can-messages-be-encrypted" id="id29">Can messages be encrypted?</a></li>
<li><a class="reference internal" href="#is-it-safe-to-run-celery-worker-as-root" id="id30">Is it safe to run <strong class="program">celery worker</strong> as root?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#brokers" id="id31">Brokers</a><ul>
<li><a class="reference internal" href="#why-is-rabbitmq-crashing" id="id32">Why is RabbitMQ crashing?</a></li>
<li><a class="reference internal" href="#can-i-use-celery-with-activemq-stomp" id="id33">Can I use Celery with ActiveMQ/STOMP?</a></li>
<li><a class="reference internal" href="#what-features-aren-t-supported-when-not-using-an-amqp-broker" id="id34">What features aren’t supported when not using an AMQP broker?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tasks" id="id35">Tasks</a><ul>
<li><a class="reference internal" href="#how-can-i-reuse-the-same-connection-when-calling-tasks" id="id36">How can I reuse the same connection when calling tasks?</a></li>
<li><a class="reference internal" href="#sudo-in-a-subprocess-returns-none" id="id37"><strong class="command">sudo</strong> in a <a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#module-subprocess" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> returns <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a></li>
<li><a class="reference internal" href="#why-do-workers-delete-tasks-from-the-queue-if-they-re-unable-to-process-them" id="id38">Why do workers delete tasks from the queue if they’re unable to process them?</a></li>
<li><a class="reference internal" href="#can-i-call-a-task-by-name" id="id39">Can I call a task by name?</a></li>
<li><a class="reference internal" href="#can-i-get-the-task-id-of-the-current-task" id="id40">Can I get the task id of the current task?</a></li>
<li><a class="reference internal" href="#can-i-specify-a-custom-task-id" id="id41">Can I specify a custom task_id?</a></li>
<li><a class="reference internal" href="#can-i-use-decorators-with-tasks" id="id42">Can I use decorators with tasks?</a></li>
<li><a class="reference internal" href="#can-i-use-natural-task-ids" id="id43">Can I use natural task ids?</a></li>
<li><a class="reference internal" href="#can-i-run-a-task-once-another-task-has-finished" id="id44">Can I run a task once another task has finished?</a></li>
<li><a class="reference internal" href="#can-i-cancel-the-execution-of-a-task" id="id45">Can I cancel the execution of a task?</a></li>
<li><a class="reference internal" href="#why-aren-t-my-remote-control-commands-received-by-all-workers" id="id46">Why aren’t my remote control commands received by all workers?</a></li>
<li><a class="reference internal" href="#can-i-send-some-tasks-to-only-some-servers" id="id47">Can I send some tasks to only some servers?</a></li>
<li><a class="reference internal" href="#can-i-disable-prefetching-of-tasks" id="id48">Can I disable prefetching of tasks?</a></li>
<li><a class="reference internal" href="#can-i-change-the-interval-of-a-periodic-task-at-runtime" id="id49">Can I change the interval of a periodic task at runtime?</a></li>
<li><a class="reference internal" href="#does-celery-support-task-priorities" id="id50">Does Celery support task priorities?</a></li>
<li><a class="reference internal" href="#should-i-use-retry-or-acks-late" id="id51">Should I use retry or acks_late?</a></li>
<li><a class="reference internal" href="#module-celery.app.task" id="id52">Can I schedule tasks to execute at a specific time?</a></li>
<li><a class="reference internal" href="#can-i-safely-shut-down-the-worker" id="id53">Can I safely shut down the worker?</a></li>
<li><a class="reference internal" href="#can-i-run-the-worker-in-the-background-on-platform" id="id54">Can I run the worker in the background on [platform]?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#django" id="id55">Django</a><ul>
<li><a class="reference internal" href="#what-purpose-does-the-database-tables-created-by-django-celery-beat-have" id="id56">What purpose does the database tables created by <code class="docutils literal notranslate"><span class="pre">django-celery-beat</span></code> have?</a></li>
<li><a class="reference internal" href="#what-purpose-does-the-database-tables-created-by-django-celery-results-have" id="id57">What purpose does the database tables created by <code class="docutils literal notranslate"><span class="pre">django-celery-results</span></code> have?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows" id="id58">Windows</a><ul>
<li><a class="reference internal" href="#does-celery-support-windows" id="id59">Does Celery support Windows?</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general">
<span id="faq-general"></span><h2><a class="toc-backref" href="#id1">General</a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-kinds-of-things-should-i-use-celery-for">
<span id="faq-when-to-use"></span><h3><a class="toc-backref" href="#id2">What kinds of things should I use Celery for?</a><a class="headerlink" href="#what-kinds-of-things-should-i-use-celery-for" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> <a class="reference external" href="https://decafbad.com/blog/2008/07/04/queue-everything-and-delight-everyone">Queue everything and delight everyone</a> is a good article
describing why you’d use a queue in a web context.</p>
<p>These are some common use cases:</p>
<ul class="simple">
<li>Running something in the background. For example, to finish the web request
as soon as possible, then update the users page incrementally.
This gives the user the impression of good performance and “snappiness”, even
though the real work might actually take some time.</li>
<li>Running something after the web request has finished.</li>
<li>Making sure something is done, by executing it asynchronously and using
retries.</li>
<li>Scheduling periodic work.</li>
</ul>
<p>And to some degree:</p>
<ul class="simple">
<li>Distributed computing.</li>
<li>Parallel execution.</li>
</ul>
</div>
</div>
<div class="section" id="misconceptions">
<span id="faq-misconceptions"></span><h2><a class="toc-backref" href="#id3">Misconceptions</a><a class="headerlink" href="#misconceptions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="does-celery-really-consist-of-50-000-lines-of-code">
<span id="faq-loc"></span><h3><a class="toc-backref" href="#id4">Does Celery really consist of 50.000 lines of code?</a><a class="headerlink" href="#does-celery-really-consist-of-50-000-lines-of-code" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> No, this and similarly large numbers have
been reported at various locations.</p>
<p>The numbers as of this writing are:</p>
<blockquote>
<div><ul class="simple">
<li>core: 7,141 lines of code.</li>
<li>tests: 14,209 lines.</li>
<li>backends, contrib, compat utilities: 9,032 lines.</li>
</ul>
</div></blockquote>
<p>Lines of code isn’t a useful metric, so
even if Celery did consist of 50k lines of code you wouldn’t
be able to draw any conclusions from such a number.</p>
</div>
<div class="section" id="does-celery-have-many-dependencies">
<h3><a class="toc-backref" href="#id5">Does Celery have many dependencies?</a><a class="headerlink" href="#does-celery-have-many-dependencies" title="Permalink to this headline">¶</a></h3>
<p>A common criticism is that Celery uses too many dependencies.
The rationale behind such a fear is hard to imagine, especially considering
code reuse as the established way to combat complexity in modern software
development, and that the cost of adding dependencies is very low now
that package managers like pip and PyPI makes the hassle of installing
and maintaining dependencies a thing of the past.</p>
<p>Celery has replaced several dependencies along the way, and
the current list of dependencies are:</p>
<div class="section" id="celery">
<h4><a class="toc-backref" href="#id6">celery</a><a class="headerlink" href="#celery" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/kombu/">kombu</a></li>
</ul>
<p>Kombu is part of the Celery ecosystem and is the library used
to send and receive messages. It’s also the library that enables
us to support many different message brokers. It’s also used by the
OpenStack project, and many others, validating the choice to separate
it from the Celery code-base.</p>
<ul class="simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/billiard/">billiard</a></li>
</ul>
<p>Billiard is a fork of the Python multiprocessing module containing
many performance and stability improvements. It’s an eventual goal
that these improvements will be merged back into Python one day.</p>
<p>It’s also used for compatibility with older Python versions
that don’t come with the multiprocessing module.</p>
<ul class="simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/pytz/">pytz</a></li>
</ul>
<p>The pytz module provides timezone definitions and related tools.</p>
</div>
<div class="section" id="kombu">
<h4><a class="toc-backref" href="#id7">kombu</a><a class="headerlink" href="#kombu" title="Permalink to this headline">¶</a></h4>
<p>Kombu depends on the following packages:</p>
<ul class="simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/amqp/">amqp</a></li>
</ul>
<p>The underlying pure-Python amqp client implementation. AMQP being the default
broker this is a natural dependency.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To handle the dependencies for popular configuration
choices Celery defines a number of “bundle” packages,
see <a class="reference internal" href="getting-started/introduction.html#bundles"><span class="std std-ref">Bundles</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="is-celery-heavy-weight">
<span id="faq-heavyweight"></span><h3><a class="toc-backref" href="#id8">Is Celery heavy-weight?</a><a class="headerlink" href="#is-celery-heavy-weight" title="Permalink to this headline">¶</a></h3>
<p>Celery poses very little overhead both in memory footprint and
performance.</p>
<p>But please note that the default configuration isn’t optimized for time nor
space, see the <a class="reference internal" href="userguide/optimizing.html#guide-optimizing"><span class="std std-ref">Optimizing</span></a> guide for more information.</p>
</div>
<div class="section" id="is-celery-dependent-on-pickle">
<span id="faq-serialization-is-a-choice"></span><h3><a class="toc-backref" href="#id9">Is Celery dependent on pickle?</a><a class="headerlink" href="#is-celery-dependent-on-pickle" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> No, Celery can support any serialization scheme.</p>
<p>We have built-in support for JSON, YAML, Pickle, and msgpack.
Every task is associated with a content type, so you can even send one task using pickle,
another using JSON.</p>
<p>The default serialization support used to be pickle, but since 4.0 the default
is now JSON.  If you require sending complex Python objects as task arguments,
you can use pickle as the serialization format, but see notes in
<a class="reference internal" href="userguide/security.html#security-serializers"><span class="std std-ref">Serializers</span></a>.</p>
<p>If you need to communicate with other languages you should use
a serialization format suited to that task, which pretty much means any
serializer that’s not pickle.</p>
<p>You can set a global default serializer, the default serializer for a
particular Task, or even what serializer to use when sending a single task
instance.</p>
</div>
<div class="section" id="is-celery-for-django-only">
<span id="faq-is-celery-for-django-only"></span><h3><a class="toc-backref" href="#id10">Is Celery for Django only?</a><a class="headerlink" href="#is-celery-for-django-only" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> No, you can use Celery with any framework, web or otherwise.</p>
</div>
<div class="section" id="do-i-have-to-use-amqp-rabbitmq">
<span id="faq-is-celery-for-rabbitmq-only"></span><h3><a class="toc-backref" href="#id11">Do I have to use AMQP/RabbitMQ?</a><a class="headerlink" href="#do-i-have-to-use-amqp-rabbitmq" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: No, although using RabbitMQ is recommended you can also
use Redis, SQS, or Qpid.</p>
<p>See <a class="reference internal" href="getting-started/brokers/index.html#brokers"><span class="std std-ref">Brokers</span></a> for more information.</p>
<p>Redis as a broker won’t perform as well as
an AMQP broker, but the combination RabbitMQ as broker and Redis as a result
store is commonly used. If you have strict reliability requirements you’re
encouraged to use RabbitMQ or another AMQP broker. Some transports also use
polling, so they’re likely to consume more resources. However, if you for
some reason aren’t able to use AMQP, feel free to use these alternatives.
They will probably work fine for most use cases, and note that the above
points are not specific to Celery; If using Redis/database as a queue worked
fine for you before, it probably will now. You can always upgrade later
if you need to.</p>
</div>
<div class="section" id="is-celery-multilingual">
<span id="faq-is-celery-multilingual"></span><h3><a class="toc-backref" href="#id12">Is Celery multilingual?</a><a class="headerlink" href="#is-celery-multilingual" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> Yes.</p>
<p><a class="reference internal" href="reference/celery.bin.worker.html#module-celery.bin.worker" title="celery.bin.worker"><code class="xref py py-mod docutils literal notranslate"><span class="pre">worker</span></code></a> is an implementation of Celery in Python. If the
language has an AMQP client, there shouldn’t be much work to create a worker
in your language. A Celery worker is just a program connecting to the broker
to process messages.</p>
<p>Also, there’s another way to be language-independent, and that’s to use REST
tasks, instead of your tasks being functions, they’re URLs. With this
information you can even create simple web servers that enable preloading of
code. Simply expose an endpoint that performs an operation, and create a task
that just performs an HTTP request to that endpoint.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<span id="faq-troubleshooting"></span><h2><a class="toc-backref" href="#id13">Troubleshooting</a><a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mysql-is-throwing-deadlock-errors-what-can-i-do">
<span id="faq-mysql-deadlocks"></span><h3><a class="toc-backref" href="#id14">MySQL is throwing deadlock errors, what can I do?</a><a class="headerlink" href="#mysql-is-throwing-deadlock-errors-what-can-i-do" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> MySQL has default isolation level set to <cite>REPEATABLE-READ</cite>,
if you don’t really need that, set it to <cite>READ-COMMITTED</cite>.
You can do that by adding the following to your <code class="file docutils literal notranslate"><span class="pre">my.cnf</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mysqld</span><span class="p">]</span>
<span class="n">transaction</span><span class="o">-</span><span class="n">isolation</span> <span class="o">=</span> <span class="n">READ</span><span class="o">-</span><span class="n">COMMITTED</span>
</pre></div>
</div>
<p>For more information about InnoDB`s transaction model see <a class="reference external" href="https://dev.mysql.com/doc/refman/5.1/en/innodb-transaction-model.html">MySQL - The InnoDB
Transaction Model and Locking</a> in the MySQL user manual.</p>
<p>(Thanks to Honza Kral and Anton Tsigularov for this solution)</p>
</div>
<div class="section" id="the-worker-isn-t-doing-anything-just-hanging">
<span id="faq-worker-hanging"></span><h3><a class="toc-backref" href="#id15">The worker isn’t doing anything, just hanging</a><a class="headerlink" href="#the-worker-isn-t-doing-anything-just-hanging" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> See <a class="reference internal" href="#mysql-is-throwing-deadlock-errors-what-can-i-do">MySQL is throwing deadlock errors, what can I do?</a>,
or <a class="reference internal" href="#why-is-task-delay-apply-the-worker-just-hanging">Why is Task.delay/apply*/the worker just hanging?</a>.</p>
</div>
<div class="section" id="task-results-aren-t-reliably-returning">
<span id="faq-results-unreliable"></span><h3><a class="toc-backref" href="#id16">Task results aren’t reliably returning</a><a class="headerlink" href="#task-results-aren-t-reliably-returning" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> If you’re using the database backend for results, and in particular
using MySQL, see <a class="reference internal" href="#mysql-is-throwing-deadlock-errors-what-can-i-do">MySQL is throwing deadlock errors, what can I do?</a>.</p>
</div>
<div class="section" id="why-is-task-delay-apply-the-worker-just-hanging">
<span id="faq-publish-hanging"></span><h3><a class="toc-backref" href="#id17">Why is Task.delay/apply*/the worker just hanging?</a><a class="headerlink" href="#why-is-task-delay-apply-the-worker-just-hanging" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> There’s a bug in some AMQP clients that’ll make it hang if
it’s not able to authenticate the current user, the password doesn’t match or
the user doesn’t have access to the virtual host specified. Be sure to check
your broker logs (for RabbitMQ that’s <code class="file docutils literal notranslate"><span class="pre">/var/log/rabbitmq/rabbit.log</span></code> on
most systems), it usually contains a message describing the reason.</p>
</div>
<div class="section" id="does-it-work-on-freebsd">
<span id="faq-worker-on-freebsd"></span><h3><a class="toc-backref" href="#id18">Does it work on FreeBSD?</a><a class="headerlink" href="#does-it-work-on-freebsd" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> Depends;</p>
<p>When using the RabbitMQ (AMQP) and Redis transports it should work
out of the box.</p>
<p>For other transports the compatibility prefork pool is
used and requires a working POSIX semaphore implementation,
this is enabled in FreeBSD by default since FreeBSD 8.x.
For older version of FreeBSD, you have to enable
POSIX semaphores in the kernel and manually recompile billiard.</p>
<p>Luckily, Viktor Petersson has written a tutorial to get you started with
Celery on FreeBSD here:
<a class="reference external" href="http://www.playingwithwire.com/2009/10/how-to-get-celeryd-to-work-on-freebsd/">http://www.playingwithwire.com/2009/10/how-to-get-celeryd-to-work-on-freebsd/</a></p>
</div>
<div class="section" id="i-m-having-integrityerror-duplicate-key-errors-why">
<span id="faq-duplicate-key-errors"></span><h3><a class="toc-backref" href="#id19">I’m having <cite>IntegrityError: Duplicate Key</cite> errors. Why?</a><a class="headerlink" href="#i-m-having-integrityerror-duplicate-key-errors-why" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> See <a class="reference internal" href="#mysql-is-throwing-deadlock-errors-what-can-i-do">MySQL is throwing deadlock errors, what can I do?</a>.
Thanks to <a class="reference external" href="https://github.com/&#64;howsthedotcom/">&#64;&#64;howsthedotcom</a>.</p>
</div>
<div class="section" id="why-aren-t-my-tasks-processed">
<span id="faq-worker-stops-processing"></span><h3><a class="toc-backref" href="#id20">Why aren’t my tasks processed?</a><a class="headerlink" href="#why-aren-t-my-tasks-processed" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> With RabbitMQ you can see how many consumers are currently
receiving tasks by running the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> rabbitmqctl list_queues -p &lt;myvhost&gt; name messages consumers
<span class="go">Listing queues ...</span>
<span class="go">celery     2891    2</span>
</pre></div>
</div>
<p>This shows that there’s 2891 messages waiting to be processed in the task
queue, and there are two consumers processing them.</p>
<p>One reason that the queue is never emptied could be that you have a stale
worker process taking the messages hostage. This could happen if the worker
wasn’t properly shut down.</p>
<p>When a message is received by a worker the broker waits for it to be
acknowledged before marking the message as processed. The broker won’t
re-send that message to another consumer until the consumer is shut down
properly.</p>
<p>If you hit this problem you have to kill all workers manually and restart
them:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pkill <span class="s1">&#39;celery worker&#39;</span>

<span class="gp">$</span> <span class="c1"># - If you don&#39;t have pkill use:</span>
<span class="gp">$</span> <span class="c1"># ps auxww | grep &#39;celery worker&#39; | awk &#39;{print $2}&#39; | xargs kill</span>
</pre></div>
</div>
<p>You may have to wait a while until all workers have finished executing
tasks. If it’s still hanging after a long time you can kill them by force
with:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pkill -9 <span class="s1">&#39;celery worker&#39;</span>

<span class="gp">$</span> <span class="c1"># - If you don&#39;t have pkill use:</span>
<span class="gp">$</span> <span class="c1"># ps auxww | grep &#39;celery worker&#39; | awk &#39;{print $2}&#39; | xargs kill -9</span>
</pre></div>
</div>
</div>
<div class="section" id="why-won-t-my-task-run">
<span id="faq-task-does-not-run"></span><h3><a class="toc-backref" href="#id21">Why won’t my Task run?</a><a class="headerlink" href="#why-won-t-my-task-run" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> There might be syntax errors preventing the tasks module being imported.</p>
<p>You can find out if Celery is able to run the task by executing the
task manually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapp.tasks</span> <span class="kn">import</span> <span class="n">MyPeriodicTask</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">MyPeriodicTask</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
</pre></div>
</div>
<p>Watch the workers log file to see if it’s able to find the task, or if some
other error is happening.</p>
</div>
<div class="section" id="why-won-t-my-periodic-task-run">
<span id="faq-periodic-task-does-not-run"></span><h3><a class="toc-backref" href="#id22">Why won’t my periodic task run?</a><a class="headerlink" href="#why-won-t-my-periodic-task-run" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> See <a class="reference internal" href="#why-won-t-my-task-run">Why won’t my Task run?</a>.</p>
</div>
<div class="section" id="how-do-i-purge-all-waiting-tasks">
<span id="faq-purge-the-queue"></span><h3><a class="toc-backref" href="#id23">How do I purge all waiting tasks?</a><a class="headerlink" href="#how-do-i-purge-all-waiting-tasks" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> You can use the <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">purge</span></code> command to purge
all configured task queues:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A proj purge
</pre></div>
</div>
<p>or programmatically:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">proj.celery</span> <span class="kn">import</span> <span class="n">app</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">purge</span><span class="p">()</span>
<span class="go">1753</span>
</pre></div>
</div>
<p>If you only want to purge messages from a specific queue
you have to use the AMQP API or the <strong class="program">celery amqp</strong> utility:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A proj amqp queue.purge &lt;queue name&gt;
</pre></div>
</div>
<p>The number 1753 is the number of messages deleted.</p>
<p>You can also start the worker with the
<a class="reference internal" href="reference/celery.bin.worker.html#cmdoption-celery-worker-purge"><code class="xref std std-option docutils literal notranslate"><span class="pre">--purge</span></code></a> option enabled to purge messages
when the worker starts.</p>
</div>
<div class="section" id="i-ve-purged-messages-but-there-are-still-messages-left-in-the-queue">
<span id="faq-messages-left-after-purge"></span><h3><a class="toc-backref" href="#id24">I’ve purged messages, but there are still messages left in the queue?</a><a class="headerlink" href="#i-ve-purged-messages-but-there-are-still-messages-left-in-the-queue" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> Tasks are acknowledged (removed from the queue) as soon
as they’re actually executed. After the worker has received a task, it will
take some time until it’s actually executed, especially if there are a lot
of tasks already waiting for execution. Messages that aren’t acknowledged are
held on to by the worker until it closes the connection to the broker (AMQP
server). When that connection is closed (e.g., because the worker was stopped)
the tasks will be re-sent by the broker to the next available worker (or the
same worker when it has been restarted), so to properly purge the queue of
waiting tasks you have to stop all the workers, and then purge the tasks
using <code class="xref py py-func docutils literal notranslate"><span class="pre">celery.control.purge()</span></code>.</p>
</div>
</div>
<div class="section" id="results">
<span id="faq-results"></span><h2><a class="toc-backref" href="#id25">Results</a><a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-get-the-result-of-a-task-if-i-have-the-id-that-points-there">
<span id="faq-get-result-by-task-id"></span><h3><a class="toc-backref" href="#id26">How do I get the result of a task if I have the ID that points there?</a><a class="headerlink" href="#how-do-i-get-the-result-of-a-task-if-i-have-the-id-that-points-there" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Use <cite>task.AsyncResult</cite>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">my_task</span><span class="o">.</span><span class="n">AsyncResult</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<p>This will give you a <a class="reference internal" href="reference/celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> instance
using the tasks current result backend.</p>
<p>If you need to specify a custom result backend, or you want to use
the current application’s default backend you can use
<a class="reference internal" href="reference/celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">app.AsyncResult</span></code></a>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">AsyncResult</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="security">
<span id="faq-security"></span><h2><a class="toc-backref" href="#id27">Security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<div class="section" id="isn-t-using-pickle-a-security-concern">
<h3><a class="toc-backref" href="#id28">Isn’t using <cite>pickle</cite> a security concern?</a><a class="headerlink" href="#isn-t-using-pickle-a-security-concern" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Indeed, since Celery 4.0 the default serializer is now JSON
to make sure people are choosing serializers consciously and aware of this concern.</p>
<p>It’s essential that you protect against unauthorized
access to your broker, databases and other services transmitting pickled
data.</p>
<p>Note that this isn’t just something you should be aware of with Celery, for
example also Django uses pickle for its cache client.</p>
<p>For the task messages you can set the <a class="reference internal" href="userguide/configuration.html#std:setting-task_serializer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_serializer</span></code></a>
setting to “json” or “yaml” instead of pickle.</p>
<p>Similarly for task results you can set <a class="reference internal" href="userguide/configuration.html#std:setting-result_serializer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_serializer</span></code></a>.</p>
<p>For more details of the formats used and the lookup order when
checking what format to use for a task see <a class="reference internal" href="userguide/calling.html#calling-serializers"><span class="std std-ref">Serializers</span></a></p>
</div>
<div class="section" id="can-messages-be-encrypted">
<h3><a class="toc-backref" href="#id29">Can messages be encrypted?</a><a class="headerlink" href="#can-messages-be-encrypted" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Some AMQP brokers supports using SSL (including RabbitMQ).
You can enable this using the <a class="reference internal" href="userguide/configuration.html#std:setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a> setting.</p>
<p>It’s also possible to add additional encryption and security to messages,
if you have a need for this then you should contact the <a class="reference internal" href="getting-started/resources.html#mailing-list"><span class="std std-ref">Mailing list</span></a>.</p>
</div>
<div class="section" id="is-it-safe-to-run-celery-worker-as-root">
<h3><a class="toc-backref" href="#id30">Is it safe to run <strong class="program">celery worker</strong> as root?</a><a class="headerlink" href="#is-it-safe-to-run-celery-worker-as-root" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: No!</p>
<p>We’re not currently aware of any security issues, but it would
be incredibly naive to assume that they don’t exist, so running
the Celery services (<strong class="program">celery worker</strong>, <strong class="program">celery beat</strong>,
<strong class="program">celeryev</strong>, etc) as an unprivileged user is recommended.</p>
</div>
</div>
<div class="section" id="brokers">
<span id="faq-brokers"></span><h2><a class="toc-backref" href="#id31">Brokers</a><a class="headerlink" href="#brokers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="why-is-rabbitmq-crashing">
<h3><a class="toc-backref" href="#id32">Why is RabbitMQ crashing?</a><a class="headerlink" href="#why-is-rabbitmq-crashing" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> RabbitMQ will crash if it runs out of memory. This will be fixed in a
future release of RabbitMQ. please refer to the RabbitMQ FAQ:
<a class="reference external" href="https://www.rabbitmq.com/faq.html#node-runs-out-of-memory">https://www.rabbitmq.com/faq.html#node-runs-out-of-memory</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This is no longer the case, RabbitMQ versions 2.0 and above
includes a new persister, that’s tolerant to out of memory
errors. RabbitMQ 2.1 or higher is recommended for Celery.</p>
<p class="last">If you’re still running an older version of RabbitMQ and experience
crashes, then please upgrade!</p>
</div>
<p>Misconfiguration of Celery can eventually lead to a crash
on older version of RabbitMQ. Even if it doesn’t crash, this
can still consume a lot of resources, so it’s
important that you’re aware of the common pitfalls.</p>
<ul class="simple">
<li>Events.</li>
</ul>
<p>Running <a class="reference internal" href="reference/celery.bin.worker.html#module-celery.bin.worker" title="celery.bin.worker"><code class="xref py py-mod docutils literal notranslate"><span class="pre">worker</span></code></a> with the <a class="reference internal" href="reference/celery.bin.worker.html#cmdoption-celery-worker-e"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a>
option will send messages for events happening inside of the worker.</p>
<p>Events should only be enabled if you have an active monitor consuming them,
or if you purge the event queue periodically.</p>
<ul class="simple">
<li>AMQP backend results.</li>
</ul>
<p>When running with the AMQP result backend, every task result will be sent
as a message. If you don’t collect these results, they will build up and
RabbitMQ will eventually run out of memory.</p>
<p>This result backend is now deprecated so you shouldn’t be using it.
Use either the RPC backend for rpc-style calls, or a persistent backend
if you need multi-consumer access to results.</p>
<p>Results expire after 1 day by default. It may be a good idea
to lower this value by configuring the <a class="reference internal" href="userguide/configuration.html#std:setting-result_expires"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_expires</span></code></a>
setting.</p>
<p>If you don’t use the results for a task, make sure you set the
<cite>ignore_result</cite> option:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app.task</span><span class="p">(</span><span class="n">ignore_result</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">mytask</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">MyTask</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
    <span class="n">ignore_result</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="can-i-use-celery-with-activemq-stomp">
<span id="faq-use-celery-with-stomp"></span><h3><a class="toc-backref" href="#id33">Can I use Celery with ActiveMQ/STOMP?</a><a class="headerlink" href="#can-i-use-celery-with-activemq-stomp" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: No. It used to be supported by <a class="reference external" href="https://pypi.python.org/pypi/Carrot/">Carrot</a> (our old messaging library)
but isn’t currently supported in <a class="reference external" href="https://pypi.python.org/pypi/Kombu/">Kombu</a> (our new messaging library).</p>
</div>
<div class="section" id="what-features-aren-t-supported-when-not-using-an-amqp-broker">
<span id="faq-non-amqp-missing-features"></span><h3><a class="toc-backref" href="#id34">What features aren’t supported when not using an AMQP broker?</a><a class="headerlink" href="#what-features-aren-t-supported-when-not-using-an-amqp-broker" title="Permalink to this headline">¶</a></h3>
<p>This is an incomplete list of features not available when
using the virtual transports:</p>
<blockquote>
<div><ul class="simple">
<li>Remote control commands (supported only by Redis).</li>
<li>Monitoring with events may not work in all virtual transports.</li>
<li><dl class="first docutils">
<dt>The <cite>header</cite> and <cite>fanout</cite> exchange types</dt>
<dd>(<cite>fanout</cite> is supported by Redis).</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="tasks">
<span id="faq-tasks"></span><h2><a class="toc-backref" href="#id35">Tasks</a><a class="headerlink" href="#tasks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-can-i-reuse-the-same-connection-when-calling-tasks">
<span id="faq-tasks-connection-reuse"></span><h3><a class="toc-backref" href="#id36">How can I reuse the same connection when calling tasks?</a><a class="headerlink" href="#how-can-i-reuse-the-same-connection-when-calling-tasks" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: See the <a class="reference internal" href="userguide/configuration.html#std:setting-broker_pool_limit"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_pool_limit</span></code></a> setting.
The connection pool is enabled by default since version 2.5.</p>
</div>
<div class="section" id="sudo-in-a-subprocess-returns-none">
<span id="faq-sudo-subprocess"></span><h3><a class="toc-backref" href="#id37"><strong class="command">sudo</strong> in a <a class="reference external" href="https://docs.python.org/dev/library/subprocess.html#module-subprocess" title="(in Python v3.8)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> returns <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a><a class="headerlink" href="#sudo-in-a-subprocess-returns-none" title="Permalink to this headline">¶</a></h3>
<p>There’s a <strong class="command">sudo</strong> configuration option that makes it illegal
for process without a tty to run <strong class="command">sudo</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Defaults requiretty
</pre></div>
</div>
<p>If you have this configuration in your <code class="file docutils literal notranslate"><span class="pre">/etc/sudoers</span></code> file then
tasks won’t be able to call <strong class="command">sudo</strong> when the worker is
running as a daemon. If you want to enable that, then you need to remove
the line from <code class="file docutils literal notranslate"><span class="pre">/etc/sudoers</span></code>.</p>
<p>See: <a class="reference external" href="http://timelordz.com/wiki/Apache_Sudo_Commands">http://timelordz.com/wiki/Apache_Sudo_Commands</a></p>
</div>
<div class="section" id="why-do-workers-delete-tasks-from-the-queue-if-they-re-unable-to-process-them">
<span id="faq-deletes-unknown-tasks"></span><h3><a class="toc-backref" href="#id38">Why do workers delete tasks from the queue if they’re unable to process them?</a><a class="headerlink" href="#why-do-workers-delete-tasks-from-the-queue-if-they-re-unable-to-process-them" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>:</p>
<p>The worker rejects unknown tasks, messages with encoding errors and messages
that don’t contain the proper fields (as per the task message protocol).</p>
<p>If it didn’t reject them they could be redelivered again and again,
causing a loop.</p>
<p>Recent versions of RabbitMQ has the ability to configure a dead-letter
queue for exchange, so that rejected messages is moved there.</p>
</div>
<div class="section" id="can-i-call-a-task-by-name">
<span id="faq-execute-task-by-name"></span><h3><a class="toc-backref" href="#id39">Can I call a task by name?</a><a class="headerlink" href="#can-i-call-a-task-by-name" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, use <a class="reference internal" href="reference/celery.html#celery.Celery.send_task" title="celery.Celery.send_task"><code class="xref py py-meth docutils literal notranslate"><span class="pre">app.send_task()</span></code></a>.</p>
<p>You can also call a task by name, from any language,
using an AMQP client:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">send_task</span><span class="p">(</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="go">&lt;AsyncResult: 373550e8-b9a0-4666-bc61-ace01fa4f91d&gt;</span>
</pre></div>
</div>
<p>To use <code class="docutils literal notranslate"><span class="pre">chain</span></code>, <code class="docutils literal notranslate"><span class="pre">chord</span></code> or <code class="docutils literal notranslate"><span class="pre">group</span></code> with tasks called by name,
use the <a class="reference internal" href="reference/celery.html#celery.Celery.signature" title="celery.Celery.signature"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Celery.signature()</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chain</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">app</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{}),</span>
<span class="gp">... </span>    <span class="n">app</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="gp">... </span><span class="p">)</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
<span class="go">&lt;AsyncResult: e9d52312-c161-46f0-9013-2713e6df812d&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="can-i-get-the-task-id-of-the-current-task">
<span id="faq-get-current-task-id"></span><h3><a class="toc-backref" href="#id40">Can I get the task id of the current task?</a><a class="headerlink" href="#can-i-get-the-task-id-of-the-current-task" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, the current id and more is available in the task request:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">mytask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;Running&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more information see <a class="reference internal" href="userguide/tasks.html#task-request-info"><span class="std std-ref">Task Request</span></a>.</p>
<p>If you don’t have a reference to the task instance you can use
<a class="reference internal" href="reference/celery.html#celery.Celery.current_task" title="celery.Celery.current_task"><code class="xref py py-attr docutils literal notranslate"><span class="pre">app.current_task</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">current_task</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">id</span>
</pre></div>
</div>
<p>But note that this will be any task, be it one executed by the worker, or a
task called directly by that task, or a task called eagerly.</p>
<p>To get the current task being worked on specifically, use
<a class="reference internal" href="reference/celery.html#celery.Celery.current_worker_task" title="celery.Celery.current_worker_task"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_worker_task</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">current_worker_task</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">id</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both <a class="reference internal" href="reference/celery.html#celery.Celery.current_task" title="celery.Celery.current_task"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_task</span></code></a>, and <a class="reference internal" href="reference/celery.html#celery.Celery.current_worker_task" title="celery.Celery.current_worker_task"><code class="xref py py-attr docutils literal notranslate"><span class="pre">current_worker_task</span></code></a> can be
<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
</div>
<div class="section" id="can-i-specify-a-custom-task-id">
<span id="faq-custom-task-ids"></span><h3><a class="toc-backref" href="#id41">Can I specify a custom task_id?</a><a class="headerlink" href="#can-i-specify-a-custom-task-id" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, use the <cite>task_id</cite> argument to <code class="xref py py-meth docutils literal notranslate"><span class="pre">Task.apply_async()</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">task_id</span><span class="o">=</span><span class="s1">&#39;…&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="can-i-use-decorators-with-tasks">
<h3><a class="toc-backref" href="#id42">Can I use decorators with tasks?</a><a class="headerlink" href="#can-i-use-decorators-with-tasks" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, but please see note in the sidebar at <a class="reference internal" href="userguide/tasks.html#task-basics"><span class="std std-ref">Basics</span></a>.</p>
</div>
<div class="section" id="can-i-use-natural-task-ids">
<span id="faq-natural-task-ids"></span><h3><a class="toc-backref" href="#id43">Can I use natural task ids?</a><a class="headerlink" href="#can-i-use-natural-task-ids" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, but make sure it’s unique, as the behavior
for two tasks existing with the same id is undefined.</p>
<p>The world will probably not explode, but they can
definitely overwrite each others results.</p>
</div>
<div class="section" id="can-i-run-a-task-once-another-task-has-finished">
<span id="faq-task-callbacks"></span><h3><a class="toc-backref" href="#id44">Can I run a task once another task has finished?</a><a class="headerlink" href="#can-i-run-a-task-once-another-task-has-finished" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, you can safely launch a task inside a task.</p>
<p>A common pattern is to add callbacks to tasks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.utils.log</span> <span class="kn">import</span> <span class="n">get_task_logger</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">get_task_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app.task</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="nd">@app.task</span><span class="p">(</span><span class="n">ignore_result</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log_result</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;log_result got: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>Invocation:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">log_result</span><span class="o">.</span><span class="n">s</span><span class="p">())</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="userguide/canvas.html"><span class="doc">Canvas: Designing Work-flows</span></a> for more information.</p>
</div>
<div class="section" id="can-i-cancel-the-execution-of-a-task">
<span id="faq-cancel-task"></span><h3><a class="toc-backref" href="#id45">Can I cancel the execution of a task?</a><a class="headerlink" href="#can-i-cancel-the-execution-of-a-task" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, Use <a class="reference internal" href="reference/celery.result.html#celery.result.AsyncResult.revoke" title="celery.result.AsyncResult.revoke"><code class="xref py py-meth docutils literal notranslate"><span class="pre">result.revoke()</span></code></a>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">add</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">countdown</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">revoke</span><span class="p">()</span>
</pre></div>
</div>
<p>or if you only have the task id:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">proj.celery</span> <span class="kn">import</span> <span class="n">app</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">)</span>
</pre></div>
</div>
<p>The latter also support passing a list of task-ids as argument.</p>
</div>
<div class="section" id="why-aren-t-my-remote-control-commands-received-by-all-workers">
<span id="faq-node-not-receiving-broadcast-commands"></span><h3><a class="toc-backref" href="#id46">Why aren’t my remote control commands received by all workers?</a><a class="headerlink" href="#why-aren-t-my-remote-control-commands-received-by-all-workers" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: To receive broadcast remote control commands, every worker node
creates a unique queue name, based on the nodename of the worker.</p>
<p>If you have more than one worker with the same host name, the
control commands will be received in round-robin between them.</p>
<p>To work around this you can explicitly set the nodename for every worker
using the <a class="reference internal" href="reference/celery.bin.worker.html#cmdoption-celery-worker-n"><code class="xref std std-option docutils literal notranslate"><span class="pre">-n</span></code></a> argument to
<a class="reference internal" href="reference/celery.bin.worker.html#module-celery.bin.worker" title="celery.bin.worker"><code class="xref py py-mod docutils literal notranslate"><span class="pre">worker</span></code></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A proj worker -n worker1@%h
<span class="gp">$</span> celery -A proj worker -n worker2@%h
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">%h</span></code> expands into the current hostname.</p>
</div>
<div class="section" id="can-i-send-some-tasks-to-only-some-servers">
<span id="faq-task-routing"></span><h3><a class="toc-backref" href="#id47">Can I send some tasks to only some servers?</a><a class="headerlink" href="#can-i-send-some-tasks-to-only-some-servers" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer:</strong> Yes, you can route tasks to one or more workers,
using different message routing topologies, and a worker instance
can bind to multiple queues.</p>
<p>See <a class="reference internal" href="userguide/routing.html"><span class="doc">Routing Tasks</span></a> for more information.</p>
</div>
<div class="section" id="can-i-disable-prefetching-of-tasks">
<span id="faq-disable-prefetch"></span><h3><a class="toc-backref" href="#id48">Can I disable prefetching of tasks?</a><a class="headerlink" href="#can-i-disable-prefetching-of-tasks" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Maybe! The AMQP term “prefetch” is confusing, as it’s only used
to describe the task prefetching <em>limit</em>.  There’s no actual prefetching involved.</p>
<p>Disabling the prefetch limits is possible, but that means the worker will
consume as many tasks as it can, as fast as possible.</p>
<p>A discussion on prefetch limits, and configuration settings for a worker
that only reserves one task at a time is found here:
<a class="reference internal" href="userguide/optimizing.html#optimizing-prefetch-limit"><span class="std std-ref">Prefetch Limits</span></a>.</p>
</div>
<div class="section" id="can-i-change-the-interval-of-a-periodic-task-at-runtime">
<span id="faq-change-periodic-task-interval-at-runtime"></span><h3><a class="toc-backref" href="#id49">Can I change the interval of a periodic task at runtime?</a><a class="headerlink" href="#can-i-change-the-interval-of-a-periodic-task-at-runtime" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, you can use the Django database scheduler, or you can
create a new schedule subclass and override
<a class="reference internal" href="reference/celery.schedules.html#celery.schedules.schedule.is_due" title="celery.schedules.schedule.is_due"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_due()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.schedules</span> <span class="kn">import</span> <span class="n">schedule</span>

<span class="k">class</span> <span class="nc">my_schedule</span><span class="p">(</span><span class="n">schedule</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">is_due</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">last_run_at</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">run_now</span><span class="p">,</span> <span class="n">next_time_to_check</span>
</pre></div>
</div>
</div>
<div class="section" id="does-celery-support-task-priorities">
<span id="faq-task-priorities"></span><h3><a class="toc-backref" href="#id50">Does Celery support task priorities?</a><a class="headerlink" href="#does-celery-support-task-priorities" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, RabbitMQ supports priorities since version 3.5.0,
and the Redis transport emulates priority support.</p>
<p>You can also prioritize work by routing high priority tasks
to different workers. In the real world this usually works better
than per message priorities. You can use this in combination with rate
limiting, and per message priorities to achieve a responsive system.</p>
</div>
<div class="section" id="should-i-use-retry-or-acks-late">
<span id="faq-acks-late-vs-retry"></span><h3><a class="toc-backref" href="#id51">Should I use retry or acks_late?</a><a class="headerlink" href="#should-i-use-retry-or-acks-late" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Depends. It’s not necessarily one or the other, you may want
to use both.</p>
<p><cite>Task.retry</cite> is used to retry tasks, notably for expected errors that
is catch-able with the <a class="reference external" href="https://docs.python.org/dev/reference/compound_stmts.html#try" title="(in Python v3.8)"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">try</span></code></a> block. The AMQP transaction isn’t used
for these errors: <strong>if the task raises an exception it’s still acknowledged!</strong></p>
<p>The <cite>acks_late</cite> setting would be used when you need the task to be
executed again if the worker (for some reason) crashes mid-execution.
It’s important to note that the worker isn’t known to crash, and if
it does it’s usually an unrecoverable error that requires human
intervention (bug in the worker, or task code).</p>
<p>In an ideal world you could safely retry any task that’s failed, but
this is rarely the case. Imagine the following task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app.task</span>
<span class="k">def</span> <span class="nf">process_upload</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">tmpfile</span><span class="p">):</span>
    <span class="c1"># Increment a file count stored in a database</span>
    <span class="n">increment_file_counter</span><span class="p">()</span>
    <span class="n">add_file_metadata_to_db</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">tmpfile</span><span class="p">)</span>
    <span class="n">copy_file_to_destination</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">tmpfile</span><span class="p">)</span>
</pre></div>
</div>
<p>If this crashed in the middle of copying the file to its destination
the world would contain incomplete state. This isn’t a critical
scenario of course, but you can probably imagine something far more
sinister. So for ease of programming we have less reliability;
It’s a good default, users who require it and know what they
are doing can still enable acks_late (and in the future hopefully
use manual acknowledgment).</p>
<p>In addition <cite>Task.retry</cite> has features not available in AMQP
transactions: delay between retries, max retries, etc.</p>
<p>So use retry for Python errors, and if your task is idempotent
combine that with <cite>acks_late</cite> if that level of reliability
is required.</p>
</div>
<div class="section" id="module-celery.app.task">
<span id="can-i-schedule-tasks-to-execute-at-a-specific-time"></span><span id="faq-schedule-at-specific-time"></span><h3><a class="toc-backref" href="#id52">Can I schedule tasks to execute at a specific time?</a><a class="headerlink" href="#module-celery.app.task" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes. You can use the <cite>eta</cite> argument of <a class="reference internal" href="reference/celery.app.task.html#celery.app.task.Task.apply_async" title="celery.app.task.Task.apply_async"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Task.apply_async()</span></code></a>.</p>
<p>See also <a class="reference internal" href="userguide/periodic-tasks.html#guide-beat"><span class="std std-ref">Periodic Tasks</span></a>.</p>
</div>
<div class="section" id="can-i-safely-shut-down-the-worker">
<span id="faq-safe-worker-shutdown"></span><h3><a class="toc-backref" href="#id53">Can I safely shut down the worker?</a><a class="headerlink" href="#can-i-safely-shut-down-the-worker" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, use the <code class="xref std std-sig docutils literal notranslate"><span class="pre">TERM</span></code> signal.</p>
<p>This will tell the worker to finish all currently
executing jobs and shut down as soon as possible. No tasks should be lost
even with experimental transports as long as the shutdown completes.</p>
<p>You should never stop <a class="reference internal" href="reference/celery.bin.worker.html#module-celery.bin.worker" title="celery.bin.worker"><code class="xref py py-mod docutils literal notranslate"><span class="pre">worker</span></code></a> with the <code class="xref std std-sig docutils literal notranslate"><span class="pre">KILL</span></code> signal
(<code class="docutils literal notranslate"><span class="pre">kill</span> <span class="pre">-9</span></code>), unless you’ve tried <code class="xref std std-sig docutils literal notranslate"><span class="pre">TERM</span></code> a few times and waited a few
minutes to let it get a chance to shut down.</p>
<p>Also make sure you kill the main worker process only, not any of its child
processes.  You can direct a kill signal to a specific child process if
you know the process is currently executing a task the worker shutdown
is depending on, but this also means that a <code class="docutils literal notranslate"><span class="pre">WorkerLostError</span></code> state will
be set for the task so the task won’t run again.</p>
<p>Identifying the type of process is easier if you have installed the
<a class="reference external" href="https://pypi.python.org/pypi/setproctitle/">setproctitle</a> module:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install setproctitle
</pre></div>
</div>
<p>With this library installed you’ll be able to see the type of process in
<strong class="command">ps</strong> listings, but the worker must be restarted for this to take effect.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="userguide/workers.html#worker-stopping"><span class="std std-ref">Stopping the worker</span></a></p>
</div>
</div>
<div class="section" id="can-i-run-the-worker-in-the-background-on-platform">
<span id="faq-daemonizing"></span><h3><a class="toc-backref" href="#id54">Can I run the worker in the background on [platform]?</a><a class="headerlink" href="#can-i-run-the-worker-in-the-background-on-platform" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: Yes, please see <a class="reference internal" href="userguide/daemonizing.html#daemonizing"><span class="std std-ref">Daemonization</span></a>.</p>
</div>
</div>
<div class="section" id="django">
<span id="faq-django"></span><h2><a class="toc-backref" href="#id55">Django</a><a class="headerlink" href="#django" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-purpose-does-the-database-tables-created-by-django-celery-beat-have">
<span id="faq-django-beat-database-tables"></span><h3><a class="toc-backref" href="#id56">What purpose does the database tables created by <code class="docutils literal notranslate"><span class="pre">django-celery-beat</span></code> have?</a><a class="headerlink" href="#what-purpose-does-the-database-tables-created-by-django-celery-beat-have" title="Permalink to this headline">¶</a></h3>
<p>When the database-backed schedule is used the periodic task
schedule is taken from the <code class="docutils literal notranslate"><span class="pre">PeriodicTask</span></code> model, there are
also several other helper tables (<code class="docutils literal notranslate"><span class="pre">IntervalSchedule</span></code>,
<code class="docutils literal notranslate"><span class="pre">CrontabSchedule</span></code>, <code class="docutils literal notranslate"><span class="pre">PeriodicTasks</span></code>).</p>
</div>
<div class="section" id="what-purpose-does-the-database-tables-created-by-django-celery-results-have">
<span id="faq-django-result-database-tables"></span><h3><a class="toc-backref" href="#id57">What purpose does the database tables created by <code class="docutils literal notranslate"><span class="pre">django-celery-results</span></code> have?</a><a class="headerlink" href="#what-purpose-does-the-database-tables-created-by-django-celery-results-have" title="Permalink to this headline">¶</a></h3>
<p>The Django database result backend extension requires
two extra models: <code class="docutils literal notranslate"><span class="pre">TaskResult</span></code> and <code class="docutils literal notranslate"><span class="pre">GroupResult</span></code>.</p>
</div>
</div>
<div class="section" id="windows">
<span id="faq-windows"></span><h2><a class="toc-backref" href="#id58">Windows</a><a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h2>
<div class="section" id="does-celery-support-windows">
<span id="faq-windows-worker-embedded-beat"></span><h3><a class="toc-backref" href="#id59">Does Celery support Windows?</a><a class="headerlink" href="#does-celery-support-windows" title="Permalink to this headline">¶</a></h3>
<p><strong>Answer</strong>: No.</p>
<p>Since Celery 4.x, Windows is no longer supported due to lack of resources.</p>
<p>But it may still work and we are happy to accept patches.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/celery_512.png" alt="Logo"/>
            </a></p><iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>
<div id="donate">
    <b>Please help support this community project with a donation:</b>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHTwYJKoZIhvcNAQcEoIIHQDCCBzwCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYA2+c723xlntHKQYQR9yn9BEtUhDoUUlnOqhniqvNMWB4k2R0JpVkrNSu5JCbdjNOqDXKHoRfIWe3HXJJMPZBJKFMD5Izprb6xEZlTGaWnlrGXFfkdBaILQQgWYqV0DnuNmtDXCvfYmyu0p1K04wLjAJ1ufnBSP1UaS6BTcoIOOuTELMAkGBSsOAwIaBQAwgcwGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIFg/2qPwa7UCAgah20QLIllcp0VHazYo2C9h8c6gn8MTcTnpW0WFXhz9ylc/i5dCXabkrrLBBfg8NygAuvYRr4k1zdC0AJIgsV/6rSAhehabRvjRDH2EZ8OieqHfIPfkAcTm+JqbS6Z27lXkebYPnJzhkZxW7+ZC6hU/H40JFXChTag8lhqJfZELiOZLWxxilj2mkwlkdMx1YL6lcPAA7ajpAwjsnJYd/9VxLA6MDmcOu+TKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xNTEyMTAxOTEzMzBaMCMGCSqGSIb3DQEJBDEWBBTUno4gI/mmaVaGVpgB/CWwQd3DeDANBgkqhkiG9w0BAQEFAASBgFmZ1j1Ss/FNl/JRIOakhBJEdm2KGLH0d2ewwTYIgIkEKSdc5Rg2/2xFS/dglcs5Te3R2GzaqjGlNSKldsk/MgZP/BudpHAASQ09hrfDy5TaBlRRl1Yu0WzGBKcVm/WRh0v2TVV8vBHVGiJD+aY5epgRXXI/XUKD0bp8tVV1T7LS-----END PKCS7-----
    ">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorials/task-cookbook.html"
                        title="previous chapter">Task Cookbook</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="next chapter">Change history</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/faq.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Change history"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorials/task-cookbook.html" title="Task Cookbook"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Celery 4.2.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2009-2017, Ask Solem &amp; contributors.
    </div>
  </body>
</html>