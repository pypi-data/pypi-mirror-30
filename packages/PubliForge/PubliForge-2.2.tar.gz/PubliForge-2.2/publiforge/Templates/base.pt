<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xml:lang="${request.locale_name}" lang="${request.locale_name}"
      metal:define-macro="base">
<head tal:define="settings request.registry.settings">
  <meta charset="utf-8"/>
  <title>${title} &ndash; ${request.breadcrumbs.current_title()}</title>
  <meta name="description" content="${_('PubliForge, the Open Source online multimedia publishing system')}"/>
  <meta name="keywords" content="PubliForge, Pyramid, XML"/>

  <link rel="icon" href="${settings.get('skin.favicon') or '/Static/favicon.ico'}" type="image/x-icon"/>
  <link rel="shortcut icon" href="${settings.get('skin.favicon') or '/Static/favicon.ico'}" type="image/x-icon"/>

  <link rel="stylesheet" href="/Static/Css/reset.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="${settings.get('skin.css.base') or '/Static/Css/base.css'}" type="text/css" media="screen"/>
  <link rel="stylesheet" metal:define-slot="css" type="text/css" media="screen" tal:omit-tag=""/>
  <link rel="stylesheet" href="${settings['skin.css.custom']}" type="text/css" media="screen"
        tal:condition="settings.get('skin.css.custom')"/>

  <script src="/Static/Js/jquery.js" type="text/javascript"></script>
  <script type="text/javascript">jQuery.noConflict()</script>
  <script src="/Static/Js/jquery.cookie.js" type="text/javascript"></script>
  <script src="/Static/Js/base.js" type="text/javascript"></script>
  <script metal:define-slot="js" type="text/javascript" tal:omit-tag=""></script>
</head>
<body id="pf${page_id}">
  <!-- ================================ Header ============================ -->
  <header id="header">
    <h1>
      <a href="${request.route_url('home')}"><span class="hidden">PubliForge</span></a>
    </h1>
    <div id="user" tal:condition="'name' in request.session">
      <span id="userTools">
        <a href="${route('logout')}" title="${_('Logout')}"><img src="/Static/Images/logout.png" alt="${_('Logout')}"/></a>
      </span>
      <span id="userName">
        <a href="${request.route_url('user_account')}" title="${_('Account settings')}">${request.session['name']}</a>
      </span>
      <span id="userPre"></span>
    </div>
    <div class="clear"></div>
  </header>
  <hr class="hidden"/>

  <!-- ================================ Crumbs ============================ -->
  <nav id="breadcrumbs">
    <div class="first"><h2>${request.breadcrumbs.current_title()}</h2></div>
    <div class="last">${request.breadcrumbs.trail()}</div>
  </nav>

  <!-- ============================== Container =========================== -->
  <div id="pfContainer">
    <div metal:define-slot="form" tal:omit-tag="">
      ${form.begin(id='pfWrapper')}
    </div>
    <aside id="asidePanel">
      <div id="asideContent">
        <!-- ......................... Selection .......................... -->
        <fieldset id="selection" tal:condition="selection.active" data-color="#f2f2e0">
          <legend>
            <span><img src="/Static/Images/selection.png" alt="selection"/> ${_('Selection')}</span>
          </legend>
          <div id="selectionFiles">
            ${selection.xhtml()}
          </div>
        </fieldset>
        <!-- ........................... Menu ............................. -->
        <fieldset id="menu" tal:condition="menu.active">
          <legend>${_('Main menu')}</legend>
          ${menu.xhtml()}
        </fieldset>
      </div>
    </aside>
    <div id="contentPanel">
      <div id="mainPanel" metal:define-slot="main">
        -- MAIN --
      </div>
    </div>
    ${form.end()}
  </div>

  <!-- ================================ Footer ============================ -->
  <footer id="footer">
    <hr class="hidden"/>
    <div class="col111">
      <div class="colFirst">
        <img src="/Static/Images/pyramid.png" alt="Pyramid" width="19" height="18"/>
        <a href="http://pylonsproject.org/" title="${_('Powered by Pyramid')}">Pyramid</a>
      </div>
      <div class="col">
        <a href="http://doc.publiforge.org">PubliForge</a>, v2.2
      </div>
      <div class="colLast">
        <a href="http://www.w3.org/WAI/WCAG1AA-Conformance" title="${_('Double-A Conformance')}"><img src="/Static/Images/wcag1aa.png" alt="${_('Double-A Conformance')}" width="45" height="16"/></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer" title="${_('Valid CSS')}"><img src="/Static/Images/vcss.png" alt="${_('Valid CSS')}" width="45" height="16"/></a>
        <a href="http://validator.w3.org/check?uri=referer" title="${_('Valid HTML 5')}"><img src="/Static/Images/valid-xhtml.png" alt="${_('Valid HTML 5')}" width="45" height="16"/></a>
      </div>
    </div>
  </footer>

  <!-- ==================================================================== -->
</body>
</html>
