<div metal:define-macro="pck_events" tal:omit-tag=""
     xmlns:tal="http://xml.zope.org/namespaces/tal"
     xmlns:metal="http://xml.zope.org/namespaces/metal">
  <div  tal:condition="pack and events" class="listActions smallList">
    <div class="first">${events.pager_top('history22', _('History'))}</div>
    <div class="last" tal:switch="action">
      <span tal:case="'none'" tal:omit-tag="">Â </span>
      <span tal:case="'del?'" tal:omit-tag="">
        ${form.submit('del!.x', _('Confirm history erasure'), class_='button')}
        ${form.submit_cancel(_('Cancel'))}
      </span>
      <span tal:case="default" tal:omit-tag="">
        ${form.submit_image('del?', _('Erase history'),
        '/Static/Images/action_history_empty.png')}
      </span>
    </div>
  </div>
  <table tal:condition="pack and events" class="list">
    <caption>${_('History')}</caption>
    <tr>
      <th>${events.sortable_column(_('Begin'), 'begin')}</th>
      <th>${_('Task')}</th>
      <th>${_('Operator')}</th>
    </tr>
    <tr tal:repeat="event events">
      <td title="${event.begin.isoformat(' ').partition('.')[0]}">
        ${age(event.begin)}
      </td>
      <td>${event.task_label}</td>
      <td>${event.operator_label}</td>
    </tr>
  </table>
  <div tal:condition="pack and events" class="listPager smallList">
    <div class="first">${events.pager_bottom('history', _('History'))}</div>
    <div class="last">
      ${_('Lines per page:')} ${form.select('page_size', '', PAGE_SIZES, True)}
    </div>
  </div>
  <div tal:condition="not pack or not events">${_('No history.')}</div>
</div>
