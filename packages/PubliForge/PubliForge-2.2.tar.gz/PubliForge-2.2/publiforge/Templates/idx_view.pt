<metal:main use-macro="base"
            xmlns:tal="http://xml.zope.org/namespaces/tal"
            xmlns:metal="http://xml.zope.org/namespaces/metal">
<div id="mainPanel" metal:fill-slot="main">
  <!-- ............................... Buttons ............................ -->
  <div id="buttons">
    <div class="first">
      ${request.breadcrumbs.back_button()}
    </div>
    <div class="last">
      <div tal:condition="i_editor" tal:omit-tag="">
        ${form.button(route('indexer_edit', indexer_id=indexer.indexer_id), _('Edit'), class_='buttonMain')}
      </div>
      ${form.submit('exp!.x', _('Export'))}
    </div>
    <hr class="hidden"/>
  </div>
  <div id="main">
    <h2 id="subtitle" class="indexer" title="${_('Indexer settings')}">${label}</h2>
    <!-- ................................ Tabs ............................ -->
    <div id="tabSet">
      ${tab_set.toc('tabIndexer')}
      <!-- ..... Description ...... -->
      ${tab_set.tab_begin(0, 'd')}
      ${form.grid_item(_('Identifier:'), indexer.indexer_id, class_='')}
      <div tal:repeat="lang labels" tal:omit-tag="">
        ${form.grid_item(_('Label (${l}):', {'l': lang}),
          labels[lang].decode('utf8'), class_='', clear=True)}
      </div>
      ${form.grid_item(_('Type of value:'),
        translate(INDEX_VALUE_TYPES[indexer.value_type]), class_='', clear=True)}
      ${form.grid_item(_('Display:'), indexer.display and _(indexer.display),
        class_='', clear=True)}
      ${form.grid_item(_('Column result:'), indexer.result_column, class_='', clear=True)}
      ${tab_set.tab_end()}
      <!-- ...... Extractors ...... -->
      ${tab_set.tab_begin(1, 'e')}
      <div class="listActions"
           tal:condition="indexer.value_type not in ('filename', 'filetype')">
        <div class="first">
          <img src="/Static/Images/extractor22.png" alt="${_('Extractors')}"/>
          <label>${_('Extractors')}</label>
        </div>
        <div class="last"> </div>
      </div>
      <table class="list smallList"
             tal:condition="indexer.value_type not in ('filename', 'filetype')">
        <tr>
          <th>${_('Indexed files')}</th>
          <th>${_('Type')}</th>
          <th>${_('Parameter')}</th>
          <th>${_('Limit')}</th>
        </tr>
        <tr tal:repeat="extractor indexer.extractors">
          <td>${extractor.indexed_files}</td>
          <td>${EXTRACTOR_TYPES[extractor.extractor_type]}</td>
          <td>${extractor.parameter}</td>
          <td>${extractor.limit or ''}</td>
        </tr>
      </table>
      <div tal:condition="indexer.value_type in ('filename', 'filetype')">
        ${_('This indexer do not use extractors.')}
      </div>
      ${tab_set.tab_end()}
      <!-- ...... Closed list ..... -->
      ${tab_set.tab_begin(2, 'l')}
      <div class="listActions"
           tal:condition="indexer.value_type in ('select', 'filetype')">
        <div class="first"><img src="/Static/Images/value22.png" alt="${_('values')}"/></div>
        <div class="last"> </div>
      </div>
      <table class="list smallList"
             tal:condition="indexer.value_type in ('select', 'filetype')">
        <tr>
          <th>${_('Label')}</th>
          <th>${_('Value')}</th>
        </tr>
        <tr tal:repeat="value indexer.values">
          <td>${value.label}</td>
          <td>${value.value}</td>
        </tr>
      </table>
      <div tal:condition="indexer.value_type not in ('select', 'filetype')">
        ${_('This indexer do not use a closed list of values.')}
      </div>
      ${tab_set.tab_end()}
    </div>
  </div>
</div>
</metal:main>
